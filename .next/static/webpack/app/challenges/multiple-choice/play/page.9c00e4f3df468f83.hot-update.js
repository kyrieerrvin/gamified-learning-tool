"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/challenges/multiple-choice/play/page",{

/***/ "(app-pages-browser)/./src/app/challenges/multiple-choice/play/page.tsx":
/*!**********************************************************!*\
  !*** ./src/app/challenges/multiple-choice/play/page.tsx ***!
  \**********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PlayMultipleChoicePage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var framer_motion__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! framer-motion */ \"(app-pages-browser)/./node_modules/framer-motion/dist/es/utils/reduced-motion/use-reduced-motion.mjs\");\n/* harmony import */ var framer_motion__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! framer-motion */ \"(app-pages-browser)/./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs\");\n/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dynamic */ \"(app-pages-browser)/./node_modules/next/dist/api/app-dynamic.js\");\n/* harmony import */ var _hooks_useGameProgress__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/hooks/useGameProgress */ \"(app-pages-browser)/./src/hooks/useGameProgress.ts\");\n/* harmony import */ var _components_ui_Button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ui/Button */ \"(app-pages-browser)/./src/components/ui/Button.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n// Dynamically import the game component to avoid module not found errors\nconst PartsOfSpeechGame = (0,next_dynamic__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(()=>__webpack_require__.e(/*! import() */ \"_app-pages-browser_src_components_challenges_multiple-choice_PartsOfSpeechGame_tsx\").then(__webpack_require__.bind(__webpack_require__, /*! @/components/challenges/multiple-choice/PartsOfSpeechGame */ \"(app-pages-browser)/./src/components/challenges/multiple-choice/PartsOfSpeechGame.tsx\")), {\n    loadableGenerated: {\n        modules: [\n            \"app/challenges/multiple-choice/play/page.tsx -> \" + \"@/components/challenges/multiple-choice/PartsOfSpeechGame\"\n        ]\n    },\n    loading: ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-[400px] flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-duolingo-purple\"\n            }, void 0, false, {\n                fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                lineNumber: 15,\n                columnNumber: 7\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n            lineNumber: 14,\n            columnNumber: 20\n        }, undefined),\n    ssr: false // Disable server-side rendering for this component\n});\n_c = PartsOfSpeechGame;\nfunction PlayMultipleChoicePage() {\n    _s();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const searchParams = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useSearchParams)();\n    const sectionId = parseInt(searchParams.get('section') || '0'); // Level group index (0: Easy, 1: Difficult, 2: Hard)\n    const levelId = parseInt(searchParams.get('level') || '0'); // Challenge index within the level (0..9)\n    const { progress, canAccessLevel, completeLevel, updateData, data, loading: gameProgressLoading } = (0,_hooks_useGameProgress__WEBPACK_IMPORTED_MODULE_4__.useGameProgress)();\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [score, setScore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [gameCompleted, setGameCompleted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [progressCompleted, setProgressCompleted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [nextSection, setNextSection] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [nextLevel, setNextLevel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const prefersReduced = (0,framer_motion__WEBPACK_IMPORTED_MODULE_6__.useReducedMotion)();\n    // Check if level is accessible AFTER game progress has loaded\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PlayMultipleChoicePage.useEffect\": ()=>{\n            if (gameProgressLoading || !data) {\n                setLoading(true);\n                return;\n            }\n            const hasAccess = canAccessLevel('multiple-choice', sectionId, levelId);\n            if (!hasAccess) {\n                router.push('/challenges/multiple-choice');\n                return;\n            }\n            setLoading(false);\n        }\n    }[\"PlayMultipleChoicePage.useEffect\"], [\n        sectionId,\n        levelId,\n        canAccessLevel,\n        router,\n        gameProgressLoading,\n        data\n    ]);\n    // Reset completion and local navigation state when URL params change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PlayMultipleChoicePage.useEffect\": ()=>{\n            setGameCompleted(false);\n            setScore(0);\n            setProgressCompleted(0);\n            setNextSection(null);\n            setNextLevel(null);\n        }\n    }[\"PlayMultipleChoicePage.useEffect\"], [\n        sectionId,\n        levelId\n    ]);\n    // Handle quest progress updates\n    const updateQuestProgress = async (questId, progressAmount)=>{\n        var _data_progress_multiplechoice;\n        if (!(data === null || data === void 0 ? void 0 : (_data_progress_multiplechoice = data.progress['multiple-choice']) === null || _data_progress_multiplechoice === void 0 ? void 0 : _data_progress_multiplechoice.quests)) return;\n        const quests = [\n            ...data.progress['multiple-choice'].quests\n        ];\n        const quest = quests.find((q)=>q.id === questId);\n        if (quest && !quest.isCompleted) {\n            quest.progress = Math.min(quest.progress + progressAmount, quest.target);\n            if (quest.progress >= quest.target) {\n                quest.isCompleted = true;\n            }\n            await updateData({\n                progress: {\n                    ...data.progress,\n                    'multiple-choice': {\n                        ...data.progress['multiple-choice'],\n                        quests\n                    }\n                }\n            });\n        }\n    };\n    // Handle game completion\n    const handleComplete = async (score, levelCompleted)=>{\n        setScore(score);\n        setGameCompleted(true);\n        // Complete level with the score to determine if next level should unlock\n        await completeLevel('multiple-choice', sectionId, levelId, score);\n        // Update perfect score quest only if perfect\n        if (score === 100) {\n            await updateQuestProgress('perfect-score', 1);\n        }\n        // Always update complete-games quest - any completed game counts\n        await updateQuestProgress('complete-games', 1);\n        // Add additional debug log for XP tracking\n        console.log(\"[XP Debug - MultipleChoice] Score: \".concat(score, \", Level: \").concat(levelId, \", Section: \").concat(sectionId));\n        // Pre-compute the next level locally to avoid relying on async store propagation\n        if (score >= 80) {\n            let ns = sectionId;\n            let nl = levelId;\n            if (levelId < 9) {\n                nl = levelId + 1;\n            } else if (sectionId < 2) {\n                ns = sectionId + 1;\n                nl = 0;\n            } else {\n                // No next level (finished last level). Keep nulls to hide the button.\n                ns = -1;\n                nl = -1;\n            }\n            setNextSection(ns >= 0 ? ns : null);\n            setNextLevel(nl >= 0 ? nl : null);\n        } else {\n            setNextSection(null);\n            setNextLevel(null);\n        }\n    };\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen flex flex-col items-center justify-center bg-gray-50\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-duolingo-purple\"\n                }, void 0, false, {\n                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                    lineNumber: 130,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-gray-600\",\n                    children: \"Naglo-load...\"\n                }, void 0, false, {\n                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                    lineNumber: 131,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n            lineNumber: 129,\n            columnNumber: 7\n        }, this);\n    }\n    if (gameCompleted) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen flex flex-col items-center justify-center bg-gray-50\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_7__.motion.div, {\n                initial: {\n                    scale: 0.9,\n                    opacity: 0\n                },\n                animate: {\n                    scale: 1,\n                    opacity: 1\n                },\n                transition: {\n                    type: \"spring\",\n                    bounce: 0.5\n                },\n                className: \"bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto text-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-6\",\n                    children: [\n                        score >= 80 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mx-auto w-24 h-24 bg-duolingo-blue rounded-full flex items-center justify-center mb-4\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-12 w-12 text-white\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M5 13l4 4L19 7\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                    lineNumber: 149,\n                                    columnNumber: 19\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                lineNumber: 148,\n                                columnNumber: 17\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                            lineNumber: 147,\n                            columnNumber: 15\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mx-auto w-24 h-24 bg-duolingo-blue rounded-full flex items-center justify-center mb-4\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-12 w-12 text-white\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                    lineNumber: 155,\n                                    columnNumber: 19\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                lineNumber: 154,\n                                columnNumber: 17\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                            lineNumber: 153,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold mb-2\",\n                            children: score >= 80 ? 'Mahusay!' : 'Magaling!'\n                        }, void 0, false, {\n                            fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                            lineNumber: 160,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-gray-600 mb-6\",\n                            children: score >= 80 ? 'Napakahusay mo! Nakumpleto mo ang level na ito.' : 'Magaling ka! Subukan mo ulit para makakuha ng mas mataas na score.'\n                        }, void 0, false, {\n                            fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                            lineNumber: 163,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-center text-xl font-bold text-duolingo-blue mb-6\",\n                            children: [\n                                \"+ \",\n                                Math.floor(score),\n                                \" XP\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                            lineNumber: 176,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                    onClick: ()=>router.push('/challenges/multiple-choice'),\n                                    className: \"w-full bg-duolingo-blue text-white hover:bg-duolingo-darkBlue\",\n                                    children: \"Bumalik sa Learning Path\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                    lineNumber: 181,\n                                    columnNumber: 15\n                                }, this),\n                                score < 80 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                    onClick: ()=>window.location.reload(),\n                                    className: \"w-full bg-gray-100 text-gray-700 hover:bg-gray-200\",\n                                    children: \"Subukan Ulit\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                    lineNumber: 189,\n                                    columnNumber: 17\n                                }, this),\n                                score >= 80 && nextSection !== null && nextLevel !== null && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_Button__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                    onClick: ()=>{\n                                        const nextSectionId = nextSection;\n                                        const nextLevelId = nextLevel;\n                                        console.log(\"[Navigation] Going to next level: Section \".concat(nextSectionId, \", Level \").concat(nextLevelId));\n                                        router.push(\"/challenges/multiple-choice/play?section=\".concat(nextSectionId, \"&level=\").concat(nextLevelId));\n                                    },\n                                    className: \"w-full bg-duolingo-green text-white hover:bg-duolingo-darkGreen\",\n                                    children: \"Susunod na Level\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                    lineNumber: 198,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                            lineNumber: 180,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                    lineNumber: 145,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                lineNumber: 139,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n            lineNumber: 138,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen flex flex-col\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"container mx-auto px-4 py-8 flex flex-col flex-1\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center justify-between mb-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>router.push('/challenges/multiple-choice'),\n                                    className: \"text-gray-600 hover:text-gray-900\",\n                                    \"aria-label\": \"Bumalik\",\n                                    children: \"← Back\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                    lineNumber: 223,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-sm text-gray-600\",\n                                    children: [\n                                        \"Level \",\n                                        sectionId + 1,\n                                        \" \\xb7 Challenge \",\n                                        levelId + 1\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                    lineNumber: 230,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                            lineNumber: 222,\n                            columnNumber: 11\n                        }, this),\n                        (()=>{\n                            const pct = Math.max(0, Math.min(100, Math.round(progressCompleted / 5 * 100)));\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full h-[10px] md:h-[14px] bg-gray-200/80 rounded-full overflow-hidden\",\n                                style: {\n                                    boxShadow: 'inset 0 1px 2px rgba(0,0,0,0.06)'\n                                },\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-full bg-gradient-to-r from-green-500 to-green-400 rounded-full relative\",\n                                    style: {\n                                        width: \"\".concat(pct, \"%\"),\n                                        transition: prefersReduced ? 'none' : 'width 240ms cubic-bezier(0.22,1,0.36,1)'\n                                    },\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute inset-0 pointer-events-none bg-white/15\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                        lineNumber: 237,\n                                        columnNumber: 19\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                    lineNumber: 236,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                                lineNumber: 235,\n                                columnNumber: 15\n                            }, this);\n                        })()\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                    lineNumber: 221,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex-1 flex items-start md:items-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PartsOfSpeechGame, {\n                        levelNumber: sectionId * 10 + levelId,\n                        onComplete: handleComplete,\n                        onProgressChange: (c)=>setProgressCompleted(c)\n                    }, \"\".concat(sectionId, \"-\").concat(levelId), false, {\n                        fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                        lineNumber: 246,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n                    lineNumber: 245,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n            lineNumber: 219,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/ervinraphaelalba/Desktop/X420/src/app/challenges/multiple-choice/play/page.tsx\",\n        lineNumber: 218,\n        columnNumber: 5\n    }, this);\n}\n_s(PlayMultipleChoicePage, \"BJclKdHWtWVE669vhw7GKNwtk6E=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter,\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useSearchParams,\n        _hooks_useGameProgress__WEBPACK_IMPORTED_MODULE_4__.useGameProgress,\n        framer_motion__WEBPACK_IMPORTED_MODULE_6__.useReducedMotion\n    ];\n});\n_c1 = PlayMultipleChoicePage;\nvar _c, _c1;\n$RefreshReg$(_c, \"PartsOfSpeechGame\");\n$RefreshReg$(_c1, \"PlayMultipleChoicePage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvY2hhbGxlbmdlcy9tdWx0aXBsZS1jaG9pY2UvcGxheS9wYWdlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFFbUQ7QUFDVTtBQUNKO0FBQ3RCO0FBQ3VCO0FBQ2Q7QUFFNUMseUVBQXlFO0FBQ3pFLE1BQU1VLG9CQUFvQkgsd0RBQU9BLENBQy9CLElBQU0seVVBQW1FOzs7Ozs7SUFFdkVJLFNBQVMsa0JBQU0sOERBQUNDO1lBQUlDLFdBQVU7c0JBQzVCLDRFQUFDRDtnQkFBSUMsV0FBVTs7Ozs7Ozs7Ozs7SUFFakJDLEtBQUssTUFBTSxtREFBbUQ7O0tBTjVESjtBQVVTLFNBQVNLOztJQUN0QixNQUFNQyxTQUFTYiwwREFBU0E7SUFDeEIsTUFBTWMsZUFBZWIsZ0VBQWVBO0lBQ3BDLE1BQU1jLFlBQVlDLFNBQVNGLGFBQWFHLEdBQUcsQ0FBQyxjQUFjLE1BQU0scURBQXFEO0lBQ3JILE1BQU1DLFVBQVVGLFNBQVNGLGFBQWFHLEdBQUcsQ0FBQyxZQUFZLE1BQU0sMENBQTBDO0lBRXRHLE1BQU0sRUFBRUUsUUFBUSxFQUFFQyxjQUFjLEVBQUVDLGFBQWEsRUFBRUMsVUFBVSxFQUFFQyxJQUFJLEVBQUVmLFNBQVNnQixtQkFBbUIsRUFBRSxHQUFHbkIsdUVBQWVBO0lBQ25ILE1BQU0sQ0FBQ0csU0FBU2lCLFdBQVcsR0FBRzFCLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQzJCLE9BQU9DLFNBQVMsR0FBRzVCLCtDQUFRQSxDQUFDO0lBQ25DLE1BQU0sQ0FBQzZCLGVBQWVDLGlCQUFpQixHQUFHOUIsK0NBQVFBLENBQUM7SUFDbkQsTUFBTSxDQUFDK0IsbUJBQW1CQyxxQkFBcUIsR0FBR2hDLCtDQUFRQSxDQUFDO0lBQzNELE1BQU0sQ0FBQ2lDLGFBQWFDLGVBQWUsR0FBR2xDLCtDQUFRQSxDQUFnQjtJQUM5RCxNQUFNLENBQUNtQyxXQUFXQyxhQUFhLEdBQUdwQywrQ0FBUUEsQ0FBZ0I7SUFD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QU8sT0FBSkwsS0FBSTt3Q0FBSXZCLFlBQVkxQixpQkFBaUIsU0FBUztvQ0FBMEM7OENBQ3BNLDRFQUFDM0I7d0NBQUlDLFdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7d0JBSXZCOzs7Ozs7OzhCQUlGLDhEQUFDRDtvQkFBSUMsV0FBVTs4QkFDYiw0RUFBQ0g7d0JBRUNvRixhQUFhNUUsWUFBWSxLQUFLRzt3QkFDOUIwRSxZQUFZekM7d0JBQ1owQyxrQkFBa0IsQ0FBQ0MsSUFBTS9ELHFCQUFxQitEO3VCQUh6QyxHQUFnQjVFLE9BQWJILFdBQVUsS0FBVyxPQUFSRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBU2pDO0dBM093Qk47O1FBQ1BaLHNEQUFTQTtRQUNIQyw0REFBZUE7UUFJZ0VJLG1FQUFlQTtRQU81RkYsMkRBQWdCQTs7O01BYmpCUyIsInNvdXJjZXMiOlsiL1VzZXJzL2VydmlucmFwaGFlbGFsYmEvRGVza3RvcC9YNDIwL3NyYy9hcHAvY2hhbGxlbmdlcy9tdWx0aXBsZS1jaG9pY2UvcGxheS9wYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUm91dGVyLCB1c2VTZWFyY2hQYXJhbXMgfSBmcm9tICduZXh0L25hdmlnYXRpb24nO1xuaW1wb3J0IHsgbW90aW9uLCB1c2VSZWR1Y2VkTW90aW9uIH0gZnJvbSAnZnJhbWVyLW1vdGlvbic7XG5pbXBvcnQgZHluYW1pYyBmcm9tICduZXh0L2R5bmFtaWMnO1xuaW1wb3J0IHsgdXNlR2FtZVByb2dyZXNzIH0gZnJvbSAnQC9ob29rcy91c2VHYW1lUHJvZ3Jlc3MnO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdAL2NvbXBvbmVudHMvdWkvQnV0dG9uJztcblxuLy8gRHluYW1pY2FsbHkgaW1wb3J0IHRoZSBnYW1lIGNvbXBvbmVudCB0byBhdm9pZCBtb2R1bGUgbm90IGZvdW5kIGVycm9yc1xuY29uc3QgUGFydHNPZlNwZWVjaEdhbWUgPSBkeW5hbWljKFxuICAoKSA9PiBpbXBvcnQoJ0AvY29tcG9uZW50cy9jaGFsbGVuZ2VzL211bHRpcGxlLWNob2ljZS9QYXJ0c09mU3BlZWNoR2FtZScpLFxuICB7IFxuICAgIGxvYWRpbmc6ICgpID0+IDxkaXYgY2xhc3NOYW1lPVwibWluLWgtWzQwMHB4XSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtMTIgdy0xMiBib3JkZXItdC0yIGJvcmRlci1iLTIgYm9yZGVyLWR1b2xpbmdvLXB1cnBsZVwiPjwvZGl2PlxuICAgIDwvZGl2PixcbiAgICBzc3I6IGZhbHNlIC8vIERpc2FibGUgc2VydmVyLXNpZGUgcmVuZGVyaW5nIGZvciB0aGlzIGNvbXBvbmVudFxuICB9XG4pO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQbGF5TXVsdGlwbGVDaG9pY2VQYWdlKCkge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3Qgc2VhcmNoUGFyYW1zID0gdXNlU2VhcmNoUGFyYW1zKCk7XG4gIGNvbnN0IHNlY3Rpb25JZCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3NlY3Rpb24nKSB8fCAnMCcpOyAvLyBMZXZlbCBncm91cCBpbmRleCAoMDogRWFzeSwgMTogRGlmZmljdWx0LCAyOiBIYXJkKVxuICBjb25zdCBsZXZlbElkID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGV2ZWwnKSB8fCAnMCcpOyAvLyBDaGFsbGVuZ2UgaW5kZXggd2l0aGluIHRoZSBsZXZlbCAoMC4uOSlcbiAgXG4gIGNvbnN0IHsgcHJvZ3Jlc3MsIGNhbkFjY2Vzc0xldmVsLCBjb21wbGV0ZUxldmVsLCB1cGRhdGVEYXRhLCBkYXRhLCBsb2FkaW5nOiBnYW1lUHJvZ3Jlc3NMb2FkaW5nIH0gPSB1c2VHYW1lUHJvZ3Jlc3MoKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtzY29yZSwgc2V0U2NvcmVdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IFtnYW1lQ29tcGxldGVkLCBzZXRHYW1lQ29tcGxldGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Byb2dyZXNzQ29tcGxldGVkLCBzZXRQcm9ncmVzc0NvbXBsZXRlZF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW25leHRTZWN0aW9uLCBzZXROZXh0U2VjdGlvbl0gPSB1c2VTdGF0ZTxudW1iZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW25leHRMZXZlbCwgc2V0TmV4dExldmVsXSA9IHVzZVN0YXRlPG51bWJlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBwcmVmZXJzUmVkdWNlZCA9IHVzZVJlZHVjZWRNb3Rpb24oKTtcbiAgXG4gIC8vIENoZWNrIGlmIGxldmVsIGlzIGFjY2Vzc2libGUgQUZURVIgZ2FtZSBwcm9ncmVzcyBoYXMgbG9hZGVkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGdhbWVQcm9ncmVzc0xvYWRpbmcgfHwgIWRhdGEpIHtcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaGFzQWNjZXNzID0gY2FuQWNjZXNzTGV2ZWwoJ211bHRpcGxlLWNob2ljZScsIHNlY3Rpb25JZCwgbGV2ZWxJZCk7XG4gICAgaWYgKCFoYXNBY2Nlc3MpIHtcbiAgICAgIHJvdXRlci5wdXNoKCcvY2hhbGxlbmdlcy9tdWx0aXBsZS1jaG9pY2UnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgfSwgW3NlY3Rpb25JZCwgbGV2ZWxJZCwgY2FuQWNjZXNzTGV2ZWwsIHJvdXRlciwgZ2FtZVByb2dyZXNzTG9hZGluZywgZGF0YV0pO1xuXG4gIC8vIFJlc2V0IGNvbXBsZXRpb24gYW5kIGxvY2FsIG5hdmlnYXRpb24gc3RhdGUgd2hlbiBVUkwgcGFyYW1zIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldEdhbWVDb21wbGV0ZWQoZmFsc2UpO1xuICAgIHNldFNjb3JlKDApO1xuICAgIHNldFByb2dyZXNzQ29tcGxldGVkKDApO1xuICAgIHNldE5leHRTZWN0aW9uKG51bGwpO1xuICAgIHNldE5leHRMZXZlbChudWxsKTtcbiAgfSwgW3NlY3Rpb25JZCwgbGV2ZWxJZF0pO1xuICBcbiAgLy8gSGFuZGxlIHF1ZXN0IHByb2dyZXNzIHVwZGF0ZXNcbiAgY29uc3QgdXBkYXRlUXVlc3RQcm9ncmVzcyA9IGFzeW5jIChxdWVzdElkOiBzdHJpbmcsIHByb2dyZXNzQW1vdW50OiBudW1iZXIpID0+IHtcbiAgICBpZiAoIWRhdGE/LnByb2dyZXNzWydtdWx0aXBsZS1jaG9pY2UnXT8ucXVlc3RzKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgcXVlc3RzID0gWy4uLmRhdGEucHJvZ3Jlc3NbJ211bHRpcGxlLWNob2ljZSddLnF1ZXN0c107XG4gICAgY29uc3QgcXVlc3QgPSBxdWVzdHMuZmluZChxID0+IHEuaWQgPT09IHF1ZXN0SWQpO1xuICAgIFxuICAgIGlmIChxdWVzdCAmJiAhcXVlc3QuaXNDb21wbGV0ZWQpIHtcbiAgICAgIHF1ZXN0LnByb2dyZXNzID0gTWF0aC5taW4ocXVlc3QucHJvZ3Jlc3MgKyBwcm9ncmVzc0Ftb3VudCwgcXVlc3QudGFyZ2V0KTtcbiAgICAgIGlmIChxdWVzdC5wcm9ncmVzcyA+PSBxdWVzdC50YXJnZXQpIHtcbiAgICAgICAgcXVlc3QuaXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgXG4gICAgICBhd2FpdCB1cGRhdGVEYXRhKHtcbiAgICAgICAgcHJvZ3Jlc3M6IHtcbiAgICAgICAgICAuLi5kYXRhLnByb2dyZXNzLFxuICAgICAgICAgICdtdWx0aXBsZS1jaG9pY2UnOiB7XG4gICAgICAgICAgICAuLi5kYXRhLnByb2dyZXNzWydtdWx0aXBsZS1jaG9pY2UnXSxcbiAgICAgICAgICAgIHF1ZXN0c1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBcbiAgLy8gSGFuZGxlIGdhbWUgY29tcGxldGlvblxuICBjb25zdCBoYW5kbGVDb21wbGV0ZSA9IGFzeW5jIChzY29yZTogbnVtYmVyLCBsZXZlbENvbXBsZXRlZDogYm9vbGVhbikgPT4ge1xuICAgIHNldFNjb3JlKHNjb3JlKTtcbiAgICBzZXRHYW1lQ29tcGxldGVkKHRydWUpO1xuICAgIFxuICAgIC8vIENvbXBsZXRlIGxldmVsIHdpdGggdGhlIHNjb3JlIHRvIGRldGVybWluZSBpZiBuZXh0IGxldmVsIHNob3VsZCB1bmxvY2tcbiAgICBhd2FpdCBjb21wbGV0ZUxldmVsKCdtdWx0aXBsZS1jaG9pY2UnLCBzZWN0aW9uSWQsIGxldmVsSWQsIHNjb3JlKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgcGVyZmVjdCBzY29yZSBxdWVzdCBvbmx5IGlmIHBlcmZlY3RcbiAgICBpZiAoc2NvcmUgPT09IDEwMCkge1xuICAgICAgYXdhaXQgdXBkYXRlUXVlc3RQcm9ncmVzcygncGVyZmVjdC1zY29yZScsIDEpO1xuICAgIH1cbiAgICBcbiAgICAvLyBBbHdheXMgdXBkYXRlIGNvbXBsZXRlLWdhbWVzIHF1ZXN0IC0gYW55IGNvbXBsZXRlZCBnYW1lIGNvdW50c1xuICAgIGF3YWl0IHVwZGF0ZVF1ZXN0UHJvZ3Jlc3MoJ2NvbXBsZXRlLWdhbWVzJywgMSk7XG4gICAgXG4gICAgLy8gQWRkIGFkZGl0aW9uYWwgZGVidWcgbG9nIGZvciBYUCB0cmFja2luZ1xuICAgIGNvbnNvbGUubG9nKGBbWFAgRGVidWcgLSBNdWx0aXBsZUNob2ljZV0gU2NvcmU6ICR7c2NvcmV9LCBMZXZlbDogJHtsZXZlbElkfSwgU2VjdGlvbjogJHtzZWN0aW9uSWR9YCk7XG5cbiAgICAvLyBQcmUtY29tcHV0ZSB0aGUgbmV4dCBsZXZlbCBsb2NhbGx5IHRvIGF2b2lkIHJlbHlpbmcgb24gYXN5bmMgc3RvcmUgcHJvcGFnYXRpb25cbiAgICBpZiAoc2NvcmUgPj0gODApIHtcbiAgICAgIGxldCBucyA9IHNlY3Rpb25JZDtcbiAgICAgIGxldCBubCA9IGxldmVsSWQ7XG4gICAgICBpZiAobGV2ZWxJZCA8IDkpIHtcbiAgICAgICAgbmwgPSBsZXZlbElkICsgMTtcbiAgICAgIH0gZWxzZSBpZiAoc2VjdGlvbklkIDwgMikge1xuICAgICAgICBucyA9IHNlY3Rpb25JZCArIDE7XG4gICAgICAgIG5sID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vIG5leHQgbGV2ZWwgKGZpbmlzaGVkIGxhc3QgbGV2ZWwpLiBLZWVwIG51bGxzIHRvIGhpZGUgdGhlIGJ1dHRvbi5cbiAgICAgICAgbnMgPSAtMTtcbiAgICAgICAgbmwgPSAtMTtcbiAgICAgIH1cbiAgICAgIHNldE5leHRTZWN0aW9uKG5zID49IDAgPyBucyA6IG51bGwpO1xuICAgICAgc2V0TmV4dExldmVsKG5sID49IDAgPyBubCA6IG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXROZXh0U2VjdGlvbihudWxsKTtcbiAgICAgIHNldE5leHRMZXZlbChudWxsKTtcbiAgICB9XG4gIH07XG4gIFxuICBpZiAobG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmF5LTUwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTEyIHctMTIgYm9yZGVyLXQtMiBib3JkZXItYi0yIGJvcmRlci1kdW9saW5nby1wdXJwbGVcIj48L2Rpdj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LWdyYXktNjAwXCI+TmFnbG8tbG9hZC4uLjwvcD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbiAgXG4gIGlmIChnYW1lQ29tcGxldGVkKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWdyYXktNTBcIj5cbiAgICAgICAgPG1vdGlvbi5kaXZcbiAgICAgICAgICBpbml0aWFsPXt7IHNjYWxlOiAwLjksIG9wYWNpdHk6IDAgfX1cbiAgICAgICAgICBhbmltYXRlPXt7IHNjYWxlOiAxLCBvcGFjaXR5OiAxIH19XG4gICAgICAgICAgdHJhbnNpdGlvbj17eyB0eXBlOiBcInNwcmluZ1wiLCBib3VuY2U6IDAuNSB9fVxuICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQteGwgc2hhZG93LWxnIHAtOCBtYXgtdy1tZCBteC1hdXRvIHRleHQtY2VudGVyXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNlwiPlxuICAgICAgICAgICAge3Njb3JlID49IDgwID8gKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gdy0yNCBoLTI0IGJnLWR1b2xpbmdvLWJsdWUgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1iLTRcIj5cbiAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTEyIHctMTIgdGV4dC13aGl0ZVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTUgMTNsNCA0TDE5IDdcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXgtYXV0byB3LTI0IGgtMjQgYmctZHVvbGluZ28tYmx1ZSByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbWItNFwiPlxuICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtMTIgdy0xMiB0ZXh0LXdoaXRlXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNOSAxMmwyIDIgNC00bTYgMmE5IDkgMCAxMS0xOCAwIDkgOSAwIDAxMTggMHpcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgbWItMlwiPlxuICAgICAgICAgICAgICB7c2NvcmUgPj0gODAgPyAnTWFodXNheSEnIDogJ01hZ2FsaW5nISd9XG4gICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMCBtYi02XCI+XG4gICAgICAgICAgICAgIHtzY29yZSA+PSA4MCBcbiAgICAgICAgICAgICAgICA/ICdOYXBha2FodXNheSBtbyEgTmFrdW1wbGV0byBtbyBhbmcgbGV2ZWwgbmEgaXRvLicgXG4gICAgICAgICAgICAgICAgOiAnTWFnYWxpbmcga2EhIFN1YnVrYW4gbW8gdWxpdCBwYXJhIG1ha2FrdWhhIG5nIG1hcyBtYXRhYXMgbmEgc2NvcmUuJ31cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIHsvKiBQUk9HUkVTUyBCQVIgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYXktMTAwIHJvdW5kZWQtZnVsbCBwLTIgbWItNlwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWR1b2xpbmdvLWJsdWUgaC02IHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlIGZvbnQtYm9sZCB0ZXh0LXNtXCIgc3R5bGU9e3sgd2lkdGg6IGAke3Njb3JlfSVgIH19PlxuICAgICAgICAgICAgICAgIHtzY29yZX0lXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAqL31cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciB0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWR1b2xpbmdvLWJsdWUgbWItNlwiPlxuICAgICAgICAgICAgICArIHtNYXRoLmZsb29yKHNjb3JlKX0gWFBcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHJvdXRlci5wdXNoKCcvY2hhbGxlbmdlcy9tdWx0aXBsZS1jaG9pY2UnKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZHVvbGluZ28tYmx1ZSB0ZXh0LXdoaXRlIGhvdmVyOmJnLWR1b2xpbmdvLWRhcmtCbHVlXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEJ1bWFsaWsgc2EgTGVhcm5pbmcgUGF0aFxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHtzY29yZSA8IDgwICYmIChcbiAgICAgICAgICAgICAgICA8QnV0dG9uIFxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWdyYXktMTAwIHRleHQtZ3JheS03MDAgaG92ZXI6YmctZ3JheS0yMDBcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFN1YnVrYW4gVWxpdFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAge3Njb3JlID49IDgwICYmIG5leHRTZWN0aW9uICE9PSBudWxsICYmIG5leHRMZXZlbCAhPT0gbnVsbCAmJiAoXG4gICAgICAgICAgICAgICAgPEJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFNlY3Rpb25JZCA9IG5leHRTZWN0aW9uIGFzIG51bWJlcjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dExldmVsSWQgPSBuZXh0TGV2ZWwgYXMgbnVtYmVyO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW05hdmlnYXRpb25dIEdvaW5nIHRvIG5leHQgbGV2ZWw6IFNlY3Rpb24gJHtuZXh0U2VjdGlvbklkfSwgTGV2ZWwgJHtuZXh0TGV2ZWxJZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goYC9jaGFsbGVuZ2VzL211bHRpcGxlLWNob2ljZS9wbGF5P3NlY3Rpb249JHtuZXh0U2VjdGlvbklkfSZsZXZlbD0ke25leHRMZXZlbElkfWApO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1kdW9saW5nby1ncmVlbiB0ZXh0LXdoaXRlIGhvdmVyOmJnLWR1b2xpbmdvLWRhcmtHcmVlblwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgU3VzdW5vZCBuYSBMZXZlbFxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbiAgXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gZmxleCBmbGV4LWNvbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXIgbXgtYXV0byBweC00IHB5LTggZmxleCBmbGV4LWNvbCBmbGV4LTFcIj5cbiAgICAgICAgey8qIE1ha2UtYS1TZW50ZW5jZSBzdHlsZSBoZWFkZXIgKyBwcm9ncmVzcyAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItMlwiPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiByb3V0ZXIucHVzaCgnL2NoYWxsZW5nZXMvbXVsdGlwbGUtY2hvaWNlJyl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDAgaG92ZXI6dGV4dC1ncmF5LTkwMFwiXG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJCdW1hbGlrXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAg4oaQIEJhY2tcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj5MZXZlbCB7c2VjdGlvbklkICsgMX0gwrcgQ2hhbGxlbmdlIHtsZXZlbElkICsgMX08L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBjdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgTWF0aC5yb3VuZCgocHJvZ3Jlc3NDb21wbGV0ZWQgLyA1KSAqIDEwMCkpKTtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtWzEwcHhdIG1kOmgtWzE0cHhdIGJnLWdyYXktMjAwLzgwIHJvdW5kZWQtZnVsbCBvdmVyZmxvdy1oaWRkZW5cIiBzdHlsZT17eyBib3hTaGFkb3c6ICdpbnNldCAwIDFweCAycHggcmdiYSgwLDAsMCwwLjA2KScgfX0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgYmctZ3JhZGllbnQtdG8tciBmcm9tLWdyZWVuLTUwMCB0by1ncmVlbi00MDAgcm91bmRlZC1mdWxsIHJlbGF0aXZlXCIgc3R5bGU9e3sgd2lkdGg6IGAke3BjdH0lYCwgdHJhbnNpdGlvbjogcHJlZmVyc1JlZHVjZWQgPyAnbm9uZScgOiAnd2lkdGggMjQwbXMgY3ViaWMtYmV6aWVyKDAuMjIsMSwwLjM2LDEpJyB9fT5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBwb2ludGVyLWV2ZW50cy1ub25lIGJnLXdoaXRlLzE1XCIgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pKCl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgey8qIENlbnRlcmVkIGdhbWUgYXJlYSAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBpdGVtcy1zdGFydCBtZDppdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICA8UGFydHNPZlNwZWVjaEdhbWVcbiAgICAgICAgICAgIGtleT17YCR7c2VjdGlvbklkfS0ke2xldmVsSWR9YH1cbiAgICAgICAgICAgIGxldmVsTnVtYmVyPXtzZWN0aW9uSWQgKiAxMCArIGxldmVsSWR9XG4gICAgICAgICAgICBvbkNvbXBsZXRlPXtoYW5kbGVDb21wbGV0ZX1cbiAgICAgICAgICAgIG9uUHJvZ3Jlc3NDaGFuZ2U9eyhjKSA9PiBzZXRQcm9ncmVzc0NvbXBsZXRlZChjKX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufSJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlUm91dGVyIiwidXNlU2VhcmNoUGFyYW1zIiwibW90aW9uIiwidXNlUmVkdWNlZE1vdGlvbiIsImR5bmFtaWMiLCJ1c2VHYW1lUHJvZ3Jlc3MiLCJCdXR0b24iLCJQYXJ0c09mU3BlZWNoR2FtZSIsImxvYWRpbmciLCJkaXYiLCJjbGFzc05hbWUiLCJzc3IiLCJQbGF5TXVsdGlwbGVDaG9pY2VQYWdlIiwicm91dGVyIiwic2VhcmNoUGFyYW1zIiwic2VjdGlvbklkIiwicGFyc2VJbnQiLCJnZXQiLCJsZXZlbElkIiwicHJvZ3Jlc3MiLCJjYW5BY2Nlc3NMZXZlbCIsImNvbXBsZXRlTGV2ZWwiLCJ1cGRhdGVEYXRhIiwiZGF0YSIsImdhbWVQcm9ncmVzc0xvYWRpbmciLCJzZXRMb2FkaW5nIiwic2NvcmUiLCJzZXRTY29yZSIsImdhbWVDb21wbGV0ZWQiLCJzZXRHYW1lQ29tcGxldGVkIiwicHJvZ3Jlc3NDb21wbGV0ZWQiLCJzZXRQcm9ncmVzc0NvbXBsZXRlZCIsIm5leHRTZWN0aW9uIiwic2V0TmV4dFNlY3Rpb24iLCJuZXh0TGV2ZWwiLCJzZXROZXh0TGV2ZWwiLCJwcmVmZXJzUmVkdWNlZCIsImhhc0FjY2VzcyIsInB1c2giLCJ1cGRhdGVRdWVzdFByb2dyZXNzIiwicXVlc3RJZCIsInByb2dyZXNzQW1vdW50IiwicXVlc3RzIiwicXVlc3QiLCJmaW5kIiwicSIsImlkIiwiaXNDb21wbGV0ZWQiLCJNYXRoIiwibWluIiwidGFyZ2V0IiwiaGFuZGxlQ29tcGxldGUiLCJsZXZlbENvbXBsZXRlZCIsImNvbnNvbGUiLCJsb2ciLCJucyIsIm5sIiwicCIsImluaXRpYWwiLCJzY2FsZSIsIm9wYWNpdHkiLCJhbmltYXRlIiwidHJhbnNpdGlvbiIsInR5cGUiLCJib3VuY2UiLCJzdmciLCJ4bWxucyIsImZpbGwiLCJ2aWV3Qm94Iiwic3Ryb2tlIiwicGF0aCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZVdpZHRoIiwiZCIsImgyIiwiZmxvb3IiLCJvbkNsaWNrIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJuZXh0U2VjdGlvbklkIiwibmV4dExldmVsSWQiLCJidXR0b24iLCJhcmlhLWxhYmVsIiwicGN0IiwibWF4Iiwicm91bmQiLCJzdHlsZSIsImJveFNoYWRvdyIsIndpZHRoIiwibGV2ZWxOdW1iZXIiLCJvbkNvbXBsZXRlIiwib25Qcm9ncmVzc0NoYW5nZSIsImMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/challenges/multiple-choice/play/page.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/store/gameStore.ts":
/*!********************************!*\
  !*** ./src/store/gameStore.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useGameStore: () => (/* binding */ useGameStore)\n/* harmony export */ });\n/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zustand */ \"(app-pages-browser)/./node_modules/zustand/esm/index.mjs\");\n/* harmony import */ var zustand_middleware__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zustand/middleware */ \"(app-pages-browser)/./node_modules/zustand/esm/middleware.mjs\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/firebase */ \"(app-pages-browser)/./src/lib/firebase.ts\");\n// src/store/gameStore.ts\n\n\n\n\n\n// Helper to get today's date as ISO string for consistency\nconst getTodayDateString = ()=>{\n    // Use consistent ISO format for all dates\n    return new Date().toISOString();\n};\n// Helper to check if two dates are consecutive days\nconst isConsecutiveDay = (previousDate, currentDate)=>{\n    if (!previousDate) return false;\n    // Parse dates (using Date constructor with YYYY-MM-DD format)\n    const prev = new Date(previousDate);\n    const curr = new Date(currentDate);\n    // Set to same time to compare just the dates\n    prev.setHours(0, 0, 0, 0);\n    curr.setHours(0, 0, 0, 0);\n    // Calculate difference in days\n    const timeDiff = curr.getTime() - prev.getTime();\n    const daysDiff = timeDiff / (1000 * 3600 * 24);\n    // Return true if the dates are exactly 1 day apart\n    return Math.round(daysDiff) === 1;\n};\n// Helper to check if dates are the same day\nconst isSameDay = (dateStr1, dateStr2)=>{\n    if (!dateStr1 || !dateStr2) return false;\n    return dateStr1 === dateStr2;\n};\n// Helper to get tomorrow's date as ISO string for consistency\nconst getTomorrowDateString = ()=>{\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    return tomorrow.toISOString();\n};\n// Generate sections with levels\nconst generateSections = function() {\n    let count = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 5, levelsPerSection = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 5;\n    return Array.from({\n        length: count\n    }).map((_, sectionIndex)=>({\n            id: sectionIndex,\n            title: \"Section \".concat(sectionIndex + 1),\n            description: \"Complete all levels in Section \".concat(sectionIndex + 1),\n            isLocked: sectionIndex !== 0,\n            isCompleted: false,\n            levels: Array.from({\n                length: levelsPerSection\n            }).map((_, levelIndex)=>({\n                    id: levelIndex,\n                    title: \"Level \".concat(levelIndex + 1),\n                    isLocked: levelIndex !== 0,\n                    isCompleted: false,\n                    bestScore: 0,\n                    attempts: 0,\n                    lastPlayed: null\n                }))\n        }));\n};\n// Generate daily quests\nconst generateDailyQuests = ()=>{\n    // Get tomorrow's date in YYYY-MM-DD format (using local time)\n    const expiresAt = getTomorrowDateString();\n    return [\n        {\n            id: 'streak-bonus',\n            title: 'Get 3 Correct in a Row',\n            description: 'Answer three questions correctly in a row',\n            reward: 10,\n            progress: 0,\n            target: 1,\n            isCompleted: false,\n            expiresAt\n        },\n        {\n            id: 'complete-games',\n            title: 'Complete 3 Games',\n            description: 'Complete any 3 games today (any score)',\n            reward: 15,\n            progress: 0,\n            target: 3,\n            isCompleted: false,\n            expiresAt\n        },\n        {\n            id: 'perfect-score',\n            title: 'Perfect Score',\n            description: 'Complete a level with a perfect score',\n            reward: 20,\n            progress: 0,\n            target: 1,\n            isCompleted: false,\n            expiresAt\n        }\n    ];\n};\n// Collection name for user game progress\nconst GAME_PROGRESS_COLLECTION = 'gameProgress';\nconst useGameStore = (0,zustand__WEBPACK_IMPORTED_MODULE_2__.create)()((0,zustand_middleware__WEBPACK_IMPORTED_MODULE_3__.persist)((set, get)=>({\n        // Initial state\n        profile: null,\n        score: 0,\n        streak: 0,\n        lastStreakDate: '',\n        streakState: 'none',\n        totalChallengesCompleted: 0,\n        progress: {},\n        achievements: [],\n        gameAchievements: {},\n        recentChallenges: [],\n        // Basic game actions\n        addPoints: (points, gameType)=>set((state)=>{\n                const gameProgress = state.progress[gameType];\n                if (!gameProgress) return state;\n                console.log(\"[XP Debug] Adding \".concat(points, \" points to \").concat(gameType));\n                console.log(\"[XP Debug] Current XP: \".concat(gameProgress.xp));\n                // Prevent negative XP - calculate new XP ensuring it doesn't go below 0\n                const newXP = Math.max(0, gameProgress.xp + points);\n                // Update XP for the specific game type\n                const updatedGameProgress = {\n                    ...gameProgress,\n                    xp: newXP\n                };\n                console.log(\"[XP Debug] New total XP: \".concat(updatedGameProgress.xp));\n                // Update daily quest progress for XP - DIRECTLY use the game's total XP value for consistency\n                const updatedQuests = gameProgress.quests;\n                const newState = {\n                    score: state.score + points,\n                    progress: {\n                        ...state.progress,\n                        [gameType]: {\n                            ...updatedGameProgress,\n                            quests: updatedQuests\n                        }\n                    }\n                };\n                // Save to Firebase after updating local state\n                setTimeout(()=>get().saveUserProgress(), 0);\n                return newState;\n            }),\n        increaseStreak: ()=>set((state)=>{\n                const today = getTodayDateString();\n                let newStreak = state.streak;\n                // Case 1: Already logged streak today - don't increase, just make active\n                if (isSameDay(state.lastStreakDate, today)) {\n                    return {\n                        ...state,\n                        streakState: 'active'\n                    };\n                }\n                // Case 2: First time playing or continuing streak from yesterday\n                if (isConsecutiveDay(state.lastStreakDate, today) || !state.lastStreakDate) {\n                    newStreak += 1;\n                } else {\n                    newStreak = 1; // Start a new streak\n                }\n                const newState = {\n                    streak: newStreak,\n                    lastStreakDate: today,\n                    streakState: 'active'\n                };\n                // Save to Firebase after updating local state\n                setTimeout(()=>get().saveUserProgress(), 0);\n                return newState;\n            }),\n        resetStreak: ()=>set((state)=>{\n                const newState = {\n                    streak: 0,\n                    lastStreakDate: '',\n                    streakState: 'none'\n                };\n                // Save to Firebase after updating local state\n                setTimeout(()=>get().saveUserProgress(), 0);\n                return newState;\n            }),\n        // Progress tracking\n        initializeGameProgress: (gameType)=>{\n            set((state)=>{\n                // Check if progress already exists for this game type\n                if (state.progress[gameType] && state.progress[gameType].sections && state.progress[gameType].sections.length > 0) {\n                    console.log(\"Game progress for \".concat(gameType, \" already initialized.\"));\n                    return state;\n                }\n                console.log(\"Initializing game progress for \".concat(gameType));\n                // Default sections with 5 sections and 5 levels each\n                const sections = generateSections();\n                // First section and first level are always unlocked\n                if (sections.length > 0) {\n                    sections[0].isLocked = false;\n                    if (sections[0].levels && sections[0].levels.length > 0) {\n                        sections[0].levels[0].isLocked = false;\n                    }\n                }\n                // Generate fresh daily quests if needed\n                const quests = generateDailyQuests();\n                return {\n                    progress: {\n                        ...state.progress,\n                        [gameType]: {\n                            sections,\n                            xp: 0,\n                            quests,\n                            currentSection: 0,\n                            currentLevel: 0,\n                            completedLevels: []\n                        }\n                    }\n                };\n            });\n        },\n        completeLevel: (gameType, sectionId, levelId, score)=>{\n            set((state)=>{\n                const gameProgress = state.progress[gameType];\n                if (!gameProgress) return state;\n                // Create a deep copy of sections\n                const updatedSections = JSON.parse(JSON.stringify(gameProgress.sections));\n                // Get the section and level\n                const section = updatedSections[sectionId];\n                if (!section || !section.levels[levelId]) return state;\n                // Update level stats - this happens regardless of score\n                const level = section.levels[levelId];\n                level.attempts = (level.attempts || 0) + 1;\n                level.lastPlayed = new Date().toISOString();\n                // Store the best score if higher than previous\n                if (score !== undefined && (level.bestScore === undefined || score > level.bestScore)) {\n                    level.bestScore = score;\n                }\n                // Create a unique ID for this level to track completion\n                const levelKey = \"\".concat(sectionId, \"-\").concat(levelId);\n                // Track completed levels for summary stats\n                let completedLevels = [\n                    ...gameProgress.completedLevels || []\n                ];\n                // Get achievements arrays\n                let achievements = [\n                    ...state.achievements || []\n                ];\n                let gameTypeAchievements = [\n                    ...state.gameAchievements[gameType] || []\n                ];\n                // Track where the user should go next (current position)\n                let nextSectionId = sectionId;\n                let nextLevelId = levelId;\n                // Mark level as completed if score is at least 80% (threshold for completing a level)\n                const isLevelCompleted = score !== undefined && score >= 80;\n                if (isLevelCompleted) {\n                    // Mark the level as completed\n                    level.isCompleted = true;\n                    // Add to completed levels array if not already there\n                    if (!completedLevels.includes(levelKey)) {\n                        completedLevels.push(levelKey);\n                    }\n                    // Check for \"Perfect Score\" achievement - score must be at least 100 (including bonuses)\n                    if (score >= 100 && !gameTypeAchievements.includes('perfect-score')) {\n                        // Add to game-specific achievements\n                        gameTypeAchievements.push('perfect-score');\n                        // Also add to global achievements for backward compatibility\n                        if (!achievements.includes('perfect-score')) {\n                            achievements.push('perfect-score');\n                        }\n                        console.log(\"[Achievement] Unlocked: Perfect Score in \".concat(gameType));\n                    }\n                    // Calculate the next level ID - advance to the next level\n                    if (levelId < section.levels.length - 1) {\n                        // Move to the next level in the same section\n                        nextLevelId = levelId + 1;\n                        // Unlock the next level\n                        section.levels[nextLevelId].isLocked = false;\n                    } else if (levelId === section.levels.length - 1) {\n                        section.isCompleted = true;\n                        // Check for \"Section Champion\" achievement\n                        // A section is considered completed when all its levels are completed\n                        const isSectionCompleted = section.levels.every((lvl)=>lvl.isCompleted);\n                        if (isSectionCompleted && !gameTypeAchievements.includes('section-champion')) {\n                            // Add to game-specific achievements\n                            gameTypeAchievements.push('section-champion');\n                            // Also add to global achievements for backward compatibility\n                            if (!achievements.includes('section-champion')) {\n                                achievements.push('section-champion');\n                            }\n                            console.log(\"[Achievement] Unlocked: Section Champion in \".concat(gameType));\n                        }\n                        // Move to the next section if available\n                        if (sectionId < updatedSections.length - 1) {\n                            nextSectionId = sectionId + 1;\n                            nextLevelId = 0; // Start at the first level of the next section\n                            // Unlock the next section\n                            updatedSections[nextSectionId].isLocked = false;\n                            // Unlock the first level of the next section\n                            updatedSections[nextSectionId].levels[0].isLocked = false;\n                        }\n                    }\n                }\n                // Update quest progress for game completion\n                const updatedQuests = gameProgress.quests.map((quest)=>{\n                    // For the 'perfect-score' quest, count games with a score of at least 100 (including bonuses)\n                    if (quest.id === 'perfect-score' && !quest.isCompleted && score !== undefined && score >= 100) {\n                        const newProgress = Math.min(quest.progress + 1, quest.target);\n                        const isCompleted = newProgress >= quest.target;\n                        return {\n                            ...quest,\n                            progress: newProgress,\n                            isCompleted\n                        };\n                    }\n                    return quest;\n                });\n                // Calculate XP Master achievement\n                if (gameProgress.xp >= 1000 && !gameTypeAchievements.includes('xp-master')) {\n                    // Add to game-specific achievements\n                    gameTypeAchievements.push('xp-master');\n                    // Also add to global achievements for backward compatibility\n                    if (!achievements.includes('xp-master')) {\n                        achievements.push('xp-master');\n                    }\n                    console.log(\"[Achievement] Unlocked: XP Master in \".concat(gameType));\n                }\n                // Prepare updated gameAchievements object\n                const updatedGameAchievements = {\n                    ...state.gameAchievements,\n                    [gameType]: gameTypeAchievements\n                };\n                // Prepare updated state\n                const newState = {\n                    achievements,\n                    gameAchievements: updatedGameAchievements,\n                    progress: {\n                        ...state.progress,\n                        [gameType]: {\n                            ...gameProgress,\n                            sections: updatedSections,\n                            quests: updatedQuests,\n                            completedLevels,\n                            // Update the current position to the next level\n                            currentSection: nextSectionId,\n                            currentLevel: nextLevelId\n                        }\n                    }\n                };\n                // Log the level transition\n                console.log(\"[Progress] Advanced to Section \".concat(nextSectionId, \", Level \").concat(nextLevelId));\n                // Save to Firebase after updating local state\n                setTimeout(()=>get().saveUserProgress(), 0);\n                return newState;\n            });\n        },\n        canAccessLevel: (gameType, sectionId, levelId)=>{\n            const state = get();\n            // Check if game progress exists\n            if (!state.progress || !state.progress[gameType]) return false;\n            const gameProgress = state.progress[gameType];\n            // Check if sections array exists and sectionId is valid\n            if (!gameProgress.sections || !Array.isArray(gameProgress.sections) || sectionId < 0 || sectionId >= gameProgress.sections.length) {\n                return false;\n            }\n            const section = gameProgress.sections[sectionId];\n            // Check if section is locked\n            if (!section || section.isLocked) return false;\n            // Check if levels array exists and levelId is valid\n            if (!section.levels || !Array.isArray(section.levels) || levelId < 0 || levelId >= section.levels.length) {\n                return false;\n            }\n            const level = section.levels[levelId];\n            // Check if level exists and is not locked\n            return level && !level.isLocked;\n        },\n        unlockSection: (gameType, sectionId)=>{\n            set((state)=>{\n                const gameProgress = state.progress[gameType];\n                if (!gameProgress) return state;\n                const updatedSections = [\n                    ...gameProgress.sections\n                ];\n                if (updatedSections[sectionId]) {\n                    updatedSections[sectionId].isLocked = false;\n                    // Also unlock the first level\n                    if (updatedSections[sectionId].levels[0]) {\n                        updatedSections[sectionId].levels[0].isLocked = false;\n                    }\n                }\n                const newState = {\n                    progress: {\n                        ...state.progress,\n                        [gameType]: {\n                            ...gameProgress,\n                            sections: updatedSections\n                        }\n                    }\n                };\n                // Save to Firebase after updating local state\n                setTimeout(()=>get().saveUserProgress(), 0);\n                return newState;\n            });\n        },\n        // Daily quests\n        addProgressToQuest: (gameType, questId, amount)=>{\n            set((state)=>{\n                const gameProgress = state.progress[gameType];\n                if (!gameProgress) return state;\n                const updatedQuests = gameProgress.quests.map((quest)=>{\n                    if (quest.id === questId && !quest.isCompleted) {\n                        const newProgress = Math.min(quest.progress + amount, quest.target);\n                        const isCompleted = newProgress >= quest.target;\n                        // When a quest completes, it automatically gives its reward\n                        if (isCompleted && !quest.isCompleted) {\n                            console.log(\"Quest \".concat(quest.title, \" completed! Reward: \").concat(quest.reward, \" XP\"));\n                            // This is where the extra XP is coming from - automatic quest rewards\n                            setTimeout(()=>get().addPoints(quest.reward, gameType), 0);\n                        }\n                        return {\n                            ...quest,\n                            progress: newProgress,\n                            isCompleted\n                        };\n                    }\n                    return quest;\n                });\n                const newState = {\n                    progress: {\n                        ...state.progress,\n                        [gameType]: {\n                            ...gameProgress,\n                            quests: updatedQuests\n                        }\n                    }\n                };\n                // Save to Firebase after updating local state\n                setTimeout(()=>get().saveUserProgress(), 0);\n                return newState;\n            });\n        },\n        completeQuest: (gameType, questId)=>{\n            set((state)=>{\n                // Skip if no progress data for this game type\n                if (!state.progress || !state.progress[gameType]) return state;\n                // Get the quests for this specific game type\n                const gameProgress = state.progress[gameType];\n                // Update only the streak-bonus quest for this game type\n                const updatedQuests = gameProgress.quests.map((quest)=>{\n                    if (quest.id === questId) {\n                        // Give XP reward for completing the quest\n                        if (!quest.isCompleted) {\n                            setTimeout(()=>get().addPoints(quest.reward, gameType), 0);\n                        }\n                        return {\n                            ...quest,\n                            progress: quest.target,\n                            isCompleted: true\n                        };\n                    }\n                    return quest;\n                });\n                // Create the updated progress for just this game type\n                const updatedProgress = {\n                    ...state.progress,\n                    [gameType]: {\n                        ...gameProgress,\n                        quests: updatedQuests\n                    }\n                };\n                // Save to Firebase after updating\n                setTimeout(()=>get().saveUserProgress(), 0);\n                return {\n                    progress: updatedProgress\n                };\n            });\n        },\n        checkAndRefreshQuests: (gameType)=>{\n            set((state)=>{\n                const gameProgress = state.progress[gameType];\n                if (!gameProgress) return state;\n                const today = getTodayDateString();\n                let questsNeedReset = false;\n                // Check if any quests have expired\n                if (gameProgress.quests && Array.isArray(gameProgress.quests)) {\n                    gameProgress.quests.forEach((quest)=>{\n                        // Compare dates in YYYY-MM-DD format (local time)\n                        // If the expiration date is today or earlier, the quest has expired\n                        if (quest.expiresAt <= today) {\n                            questsNeedReset = true;\n                        }\n                    });\n                } else {\n                    // If quests array doesn't exist or is not an array, we need to reset\n                    questsNeedReset = true;\n                }\n                // If quests need to be reset, generate new ones\n                if (questsNeedReset) {\n                    console.log(\"Resetting quests for \".concat(gameType, \" as they have expired\"));\n                    const newState = {\n                        progress: {\n                            ...state.progress,\n                            [gameType]: {\n                                ...gameProgress,\n                                quests: generateDailyQuests()\n                            }\n                        }\n                    };\n                    // Save to Firebase after updating local state\n                    setTimeout(()=>get().saveUserProgress(), 0);\n                    return newState;\n                }\n                return state;\n            });\n        },\n        resetQuests: (gameType)=>{\n            set((state)=>{\n                const gameProgress = state.progress[gameType];\n                if (!gameProgress) return state;\n                // Generate fresh quests\n                const freshQuests = generateDailyQuests();\n                const newState = {\n                    progress: {\n                        ...state.progress,\n                        [gameType]: {\n                            ...gameProgress,\n                            quests: freshQuests\n                        }\n                    }\n                };\n                // Save to Firebase after updating local state\n                setTimeout(()=>get().saveUserProgress(), 0);\n                return newState;\n            });\n        },\n        completeStreakBonusQuest: (gameType)=>{\n            set((state)=>{\n                // Skip if no progress data for this game type\n                if (!state.progress || !state.progress[gameType]) return state;\n                // Get the quests for this specific game type\n                const gameProgress = state.progress[gameType];\n                // Update only the streak-bonus quest for this game type\n                const updatedQuests = gameProgress.quests.map((quest)=>{\n                    if (quest.id === 'streak-bonus' && !quest.isCompleted) {\n                        return {\n                            ...quest,\n                            progress: 1,\n                            isCompleted: true\n                        };\n                    }\n                    return quest;\n                });\n                // Create the updated progress for just this game type\n                const updatedProgress = {\n                    ...state.progress,\n                    [gameType]: {\n                        ...gameProgress,\n                        quests: updatedQuests\n                    }\n                };\n                // Save to Firebase after updating\n                setTimeout(()=>get().saveUserProgress(), 0);\n                return {\n                    progress: updatedProgress\n                };\n            });\n        },\n        // Challenge tracking\n        addChallengeResult: (result)=>{\n            set((state)=>{\n                const newChallenges = [\n                    ...state.recentChallenges,\n                    result\n                ];\n                // Cap at 50 challenges to prevent document size issues\n                const cappedChallenges = newChallenges.slice(-50);\n                return {\n                    recentChallenges: cappedChallenges\n                };\n            });\n        },\n        // Check if streak should be reset\n        checkStreakReset: ()=>{\n            set((state)=>{\n                console.log('[StreakCheck] Current state:', {\n                    streak: state.streak,\n                    lastStreakDate: state.lastStreakDate,\n                    streakState: state.streakState\n                });\n                // If there's no last streak date, no need to check\n                if (!state.lastStreakDate) {\n                    console.log('[StreakCheck] No last streak date, setting to none');\n                    return {\n                        ...state,\n                        streakState: 'none'\n                    };\n                }\n                const today = getTodayDateString();\n                // If they already played today, streak is active\n                if (isSameDay(state.lastStreakDate, today)) {\n                    console.log('[StreakCheck] Played today, keeping streak active');\n                    return {\n                        ...state,\n                        streakState: 'active'\n                    };\n                }\n                // If they last played yesterday, streak is valid but inactive\n                if (isConsecutiveDay(state.lastStreakDate, today)) {\n                    console.log('[StreakCheck] Played yesterday, streak inactive but valid');\n                    return {\n                        ...state,\n                        streakState: 'inactive'\n                    };\n                }\n                // If it's been more than a day since last play, reset streak\n                console.log('[StreakCheck] Resetting streak due to inactivity');\n                return {\n                    ...state,\n                    streak: 0,\n                    streakState: 'none'\n                };\n            });\n        },\n        checkStreakStatus: ()=>{\n            set((state)=>{\n                const today = getTodayDateString();\n                // If no streak, status is \"none\"\n                if (state.streak === 0) {\n                    return {\n                        ...state,\n                        streakState: 'none'\n                    };\n                }\n                // If played today, streak is active\n                if (isSameDay(state.lastStreakDate, today)) {\n                    return {\n                        ...state,\n                        streakState: 'active'\n                    };\n                }\n                // Otherwise, streak exists but is inactive\n                return {\n                    ...state,\n                    streakState: 'inactive'\n                };\n            });\n        },\n        // Complete a game and handle streak/XP tracking\n        completeGame: (gameType, score, isCorrect)=>set((state)=>{\n                if (!gameType) return state;\n                console.log(\"[GameDB] Completing game: \".concat(gameType, \", Score: \").concat(score, \", Correct: \").concat(isCorrect));\n                // Update the last played timestamp\n                const gameProgress = state.progress[gameType] || {\n                    sections: generateSections(),\n                    xp: 0,\n                    quests: generateDailyQuests(),\n                    currentSection: 0,\n                    currentLevel: 0,\n                    completedLevels: [],\n                    lastPlayedAt: ''\n                };\n                // Create updated game progress with timestamp\n                const updatedGameProgress = {\n                    ...gameProgress,\n                    lastPlayedAt: new Date().toISOString()\n                };\n                // Update streak handling - IMPORTANT: streak is not reset on wrong answers\n                // It only updates (increases) when it's the first correct answer of a new day\n                const today = getTodayDateString();\n                const streakUpdates = {};\n                // Only consider streak updates for correct answers\n                if (isCorrect) {\n                    if (state.lastStreakDate !== today) {\n                        // This is the first correct answer of a new day - increase streak\n                        streakUpdates.streak = state.streak + 1;\n                        streakUpdates.lastStreakDate = today;\n                        streakUpdates.streakState = 'active';\n                        console.log(\"[GameDB] Increasing streak to \".concat(streakUpdates.streak, \" (first correct answer today)\"));\n                    } else {\n                        // Already played today and got something correct - streak remains active\n                        streakUpdates.streakState = 'active';\n                    }\n                }\n                // Update achievements - track each game type separately\n                let achievements = [\n                    ...state.achievements || []\n                ];\n                let gameTypeAchievements = [\n                    ...state.gameAchievements[gameType] || []\n                ];\n                // Check for \"First Steps\" achievement - completing any game\n                if (!gameTypeAchievements.includes('first-steps')) {\n                    // Add to game-specific achievements\n                    gameTypeAchievements.push('first-steps');\n                    // Also add to global achievements for backward compatibility\n                    if (!achievements.includes('first-steps')) {\n                        achievements.push('first-steps');\n                    }\n                    console.log(\"[Achievement] Unlocked: First Steps in \".concat(gameType, \" - Completed your first game!\"));\n                }\n                // Check for \"Perfect Score\" achievement - score must be at least 100 (including bonuses)\n                if (score >= 100 && !gameTypeAchievements.includes('perfect-score')) {\n                    // Add to game-specific achievements\n                    gameTypeAchievements.push('perfect-score');\n                    // Also add to global achievements for backward compatibility\n                    if (!achievements.includes('perfect-score')) {\n                        achievements.push('perfect-score');\n                    }\n                    console.log(\"[Achievement] Unlocked: Perfect Score in \".concat(gameType, \" - Scored 100% or higher!\"));\n                }\n                // Check for \"Streak Master\" achievement - maintain a 7-day streak\n                // Note: Streak Master is a global achievement, not game-specific\n                if (streakUpdates.streak !== undefined && streakUpdates.streak >= 7 && !achievements.includes('streak-master')) {\n                    // Add directly to global achievements\n                    achievements.push('streak-master');\n                    // But also add to game-specific achievements for the current game type\n                    if (!gameTypeAchievements.includes('streak-master')) {\n                        gameTypeAchievements.push('streak-master');\n                    }\n                    console.log('[Achievement] Unlocked: Streak Master - Maintained a 7-day streak!');\n                }\n                // Prepare updated gameAchievements object\n                const updatedGameAchievements = {\n                    ...state.gameAchievements,\n                    [gameType]: gameTypeAchievements\n                };\n                // Update progress with the game progress\n                const updatedProgress = {\n                    ...state.progress,\n                    [gameType]: updatedGameProgress\n                };\n                // Create a challenge result record\n                const challengeResult = {\n                    id: \"\".concat(gameType, \"-\").concat(Date.now()),\n                    challengeType: gameType,\n                    score,\n                    maxScore: 100,\n                    completedAt: new Date().toISOString(),\n                    duration: 0,\n                    isCorrect,\n                    gameType\n                };\n                // Add to recent challenges\n                const updatedRecentChallenges = [\n                    ...state.recentChallenges,\n                    challengeResult\n                ];\n                // Create the final state updates\n                const gameUpdates = {\n                    progress: updatedProgress,\n                    achievements,\n                    gameAchievements: updatedGameAchievements,\n                    totalChallengesCompleted: state.totalChallengesCompleted + 1,\n                    recentChallenges: updatedRecentChallenges,\n                    ...streakUpdates\n                };\n                // Save to database\n                setTimeout(()=>get().saveUserProgress(), 0);\n                return gameUpdates;\n            }),\n        // Save user progress to database with better error handling\n        saveUserProgress: async ()=>{\n            const user = _lib_firebase__WEBPACK_IMPORTED_MODULE_1__.auth.currentUser;\n            if (!user) {\n                console.error('[Database] Cannot save: No authenticated user');\n                return;\n            }\n            try {\n                console.log('[Database] Saving user progress to Firestore...');\n                // Get the user document reference\n                const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_1__.db, GAME_PROGRESS_COLLECTION, user.uid);\n                // Prepare data to save - ensure all fields exist\n                const dataToSave = {\n                    // User profile\n                    profile: get().profile,\n                    // Game statistics\n                    score: get().score || 0,\n                    streak: get().streak || 0,\n                    lastStreakDate: get().lastStreakDate || '',\n                    streakState: get().streakState || 'none',\n                    totalChallengesCompleted: get().totalChallengesCompleted || 0,\n                    // Achievements\n                    achievements: get().achievements || [],\n                    gameAchievements: get().gameAchievements || {},\n                    // Challenge history\n                    recentChallenges: get().recentChallenges || [],\n                    // Game progress data\n                    progress: get().progress || {},\n                    // Metadata\n                    updatedAt: new Date().toISOString()\n                };\n                // Log a summary of what's being saved\n                console.log(\"[Database] Saving - Score: \".concat(dataToSave.score, \", Streak: \").concat(dataToSave.streak, \", Achievements: \").concat(dataToSave.achievements.length));\n                // Deep clone to avoid Firebase warnings about objects with custom prototypes\n                const cleanData = JSON.parse(JSON.stringify(dataToSave));\n                // Use merge to avoid overwriting any fields not included in current state\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(userProgressRef, cleanData, {\n                    merge: true\n                });\n                console.log('[Database] Successfully saved user progress to Firestore');\n            } catch (error) {\n                console.error('[Database] Error saving user progress:', error);\n                // Try to save again after a delay\n                setTimeout(()=>{\n                    console.log('[Database] Retrying failed save operation...');\n                    get().saveUserProgress();\n                }, 3000);\n            }\n        },\n        // User-specific progress\n        loadUserProgress: async ()=>{\n            const user = _lib_firebase__WEBPACK_IMPORTED_MODULE_1__.auth.currentUser;\n            if (!user) {\n                console.log('[Auth] No authenticated user found when trying to load progress');\n                return;\n            }\n            try {\n                console.log(\"[Auth] Loading progress for user: \".concat(user.uid));\n                const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_1__.db, GAME_PROGRESS_COLLECTION, user.uid);\n                const userProgressDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(userProgressRef);\n                if (userProgressDoc.exists()) {\n                    const data = userProgressDoc.data();\n                    set((state)=>({\n                            ...state,\n                            profile: data.profile || null,\n                            score: data.score || 0,\n                            streak: data.streak || 0,\n                            lastStreakDate: data.lastStreakDate || '',\n                            streakState: data.streakState || 'none',\n                            totalChallengesCompleted: data.totalChallengesCompleted || 0,\n                            achievements: data.achievements || [],\n                            gameAchievements: data.gameAchievements || {},\n                            recentChallenges: data.recentChallenges || [],\n                            progress: data.progress || {}\n                        }));\n                    console.log('[Auth] Successfully loaded user progress from Firestore');\n                } else {\n                    console.log('[Auth] No saved progress found for user. Initializing new progress.');\n                    // Create initial game progress structure\n                    const initialProgress = {\n                        'make-sentence': {\n                            sections: generateSections(),\n                            xp: 0,\n                            quests: generateDailyQuests(),\n                            currentSection: 0,\n                            currentLevel: 0,\n                            completedLevels: []\n                        },\n                        'multiple-choice': {\n                            sections: generateSections(),\n                            xp: 0,\n                            quests: generateDailyQuests(),\n                            currentSection: 0,\n                            currentLevel: 0,\n                            completedLevels: []\n                        }\n                    };\n                    // First, unlock the first level of each game type\n                    for (const gameType of Object.keys(initialProgress)){\n                        if (initialProgress[gameType].sections.length > 0) {\n                            initialProgress[gameType].sections[0].isLocked = false;\n                            if (initialProgress[gameType].sections[0].levels.length > 0) {\n                                initialProgress[gameType].sections[0].levels[0].isLocked = false;\n                            }\n                        }\n                    }\n                    // Create initial user profile\n                    const initialProfile = {\n                        displayName: user.displayName,\n                        email: user.email,\n                        photoURL: user.photoURL,\n                        joinDate: new Date().toISOString(),\n                        lastActiveDate: new Date().toISOString(),\n                        gradeLevel: null,\n                        preferences: {\n                            emailNotifications: false,\n                            dailyReminder: true\n                        }\n                    };\n                    // Create initial state to update locally\n                    const newUserData = {\n                        profile: initialProfile,\n                        score: 0,\n                        streak: 0,\n                        lastStreakDate: '',\n                        streakState: 'none',\n                        totalChallengesCompleted: 0,\n                        achievements: [],\n                        gameAchievements: {},\n                        recentChallenges: [],\n                        progress: initialProgress,\n                        createdAt: new Date().toISOString(),\n                        updatedAt: new Date().toISOString(),\n                        userId: user.uid\n                    };\n                    // Update local state\n                    set((state)=>({\n                            ...state,\n                            ...newUserData\n                        }));\n                    // IMPORTANT: Save the initial data to Firestore immediately\n                    // This ensures the user has a gameProgress document from the start\n                    try {\n                        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(userProgressRef, newUserData);\n                        console.log('[Auth] Successfully created new user progress document in Firestore');\n                    } catch (error) {\n                        console.error('[Auth] Error creating initial progress document:', error);\n                    }\n                }\n                // Check if streak should be reset after loading data\n                get().checkStreakReset();\n            } catch (error) {\n                console.error('[Auth] Error loading user progress:', error);\n            }\n        },\n        // Ensure game progress exists for a given game type\n        ensureGameProgressExists: (gameType)=>{\n            set((state)=>{\n                if (!state.progress[gameType]) {\n                    const newProgress = {\n                        sections: generateSections(),\n                        xp: 0,\n                        quests: generateDailyQuests(),\n                        currentSection: 0,\n                        currentLevel: 0,\n                        completedLevels: []\n                    };\n                    return {\n                        progress: {\n                            ...state.progress,\n                            [gameType]: newProgress\n                        }\n                    };\n                }\n                return state;\n            });\n        },\n        // Profile management\n        updateUserProfile: (updates)=>{\n            set((state)=>({\n                    profile: {\n                        ...state.profile,\n                        ...updates\n                    }\n                }));\n        }\n    }), {\n    name: 'game-storage',\n    // Don't persist user progress from localStorage to avoid hydration issues\n    partialize: (state)=>({}),\n    // Only enable storage on the client side\n    skipHydration: true\n}));\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zdG9yZS9nYW1lU3RvcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSx5QkFBeUI7QUFDUTtBQUNZO0FBQ29DO0FBQzdDO0FBQ0U7QUE2SXRDLDJEQUEyRDtBQUMzRCxNQUFNTyxxQkFBcUI7SUFDekIsMENBQTBDO0lBQzFDLE9BQU8sSUFBSUMsT0FBT0MsV0FBVztBQUMvQjtBQUVBLG9EQUFvRDtBQUNwRCxNQUFNQyxtQkFBbUIsQ0FBQ0MsY0FBc0JDO0lBQzlDLElBQUksQ0FBQ0QsY0FBYyxPQUFPO0lBRTFCLDhEQUE4RDtJQUM5RCxNQUFNRSxPQUFPLElBQUlMLEtBQUtHO0lBQ3RCLE1BQU1HLE9BQU8sSUFBSU4sS0FBS0k7SUFFdEIsNkNBQTZDO0lBQzdDQyxLQUFLRSxRQUFRLENBQUMsR0FBRyxHQUFHLEdBQUc7SUFDdkJELEtBQUtDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsR0FBRztJQUV2QiwrQkFBK0I7SUFDL0IsTUFBTUMsV0FBV0YsS0FBS0csT0FBTyxLQUFLSixLQUFLSSxPQUFPO0lBQzlDLE1BQU1DLFdBQVdGLFdBQVksUUFBTyxPQUFPLEVBQUM7SUFFNUMsbURBQW1EO0lBQ25ELE9BQU9HLEtBQUtDLEtBQUssQ0FBQ0YsY0FBYztBQUNsQztBQUVBLDRDQUE0QztBQUM1QyxNQUFNRyxZQUFZLENBQUNDLFVBQWtCQztJQUNuQyxJQUFJLENBQUNELFlBQVksQ0FBQ0MsVUFBVSxPQUFPO0lBQ25DLE9BQU9ELGFBQWFDO0FBQ3RCO0FBRUEsOERBQThEO0FBQzlELE1BQU1DLHdCQUF3QjtJQUM1QixNQUFNQyxXQUFXLElBQUlqQjtJQUNyQmlCLFNBQVNDLE9BQU8sQ0FBQ0QsU0FBU0UsT0FBTyxLQUFLO0lBQ3RDLE9BQU9GLFNBQVNoQixXQUFXO0FBQzdCO0FBRUEsZ0NBQWdDO0FBQ2hDLE1BQU1tQixtQkFBbUI7UUFBQ0MseUVBQWdCLEdBQUdDLG9GQUEyQjtJQUN0RSxPQUFPQyxNQUFNQyxJQUFJLENB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QUssQ0FBQyxvREFBb0RBO29CQUNwRTtnQkFDRjtnQkFFQSxxREFBcUQ7Z0JBQ3JEOUYsTUFBTThFLGdCQUFnQjtZQUV4QixFQUFFLE9BQU9nQixPQUFPO2dCQUNkL0UsUUFBUStFLEtBQUssQ0FBQyx1Q0FBdUNBO1lBQ3ZEO1FBQ0Y7UUFFQSxvREFBb0Q7UUFDcEQyQiwwQkFBMEIsQ0FBQzdHO1lBQ3pCYixJQUFJLENBQUNjO2dCQUNILElBQUksQ0FBQ0EsTUFBTWxCLFFBQVEsQ0FBQ2lCLFNBQVMsRUFBRTtvQkFDN0IsTUFBTTRDLGNBQWM7d0JBQ2xCekIsVUFBVTFEO3dCQUNWNEMsSUFBSTt3QkFDSkssUUFBUTlCO3dCQUNSd0MsZ0JBQWdCO3dCQUNoQkMsY0FBYzt3QkFDZEMsaUJBQWlCLEVBQUU7b0JBQ3JCO29CQUVBLE9BQU87d0JBQ0x2QyxVQUFVOzRCQUNSLEdBQUdrQixNQUFNbEIsUUFBUTs0QkFDakIsQ0FBQ2lCLFNBQVMsRUFBRTRDO3dCQUNkO29CQUNGO2dCQUNGO2dCQUNBLE9BQU8zQztZQUNUO1FBQ0Y7UUFFQSxxQkFBcUI7UUFDckI2RyxtQkFBbUIsQ0FBQ0M7WUFDbEI1SCxJQUFJLENBQUNjLFFBQVc7b0JBQ2RaLFNBQVM7d0JBQ1AsR0FBR1ksTUFBTVosT0FBTzt3QkFDaEIsR0FBRzBILE9BQU87b0JBQ1o7Z0JBQ0Y7UUFDRjtJQUNGLElBQ0E7SUFDRUMsTUFBTTtJQUNOLDBFQUEwRTtJQUMxRUMsWUFBWSxDQUFDaEgsUUFBVyxFQUFDO0lBQ3pCLHlDQUF5QztJQUN6Q2lILGVBQWU7QUFDakIsSUFFRiIsInNvdXJjZXMiOlsiL1VzZXJzL2VydmlucmFwaGFlbGFsYmEvRGVza3RvcC9YNDIwL3NyYy9zdG9yZS9nYW1lU3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3N0b3JlL2dhbWVTdG9yZS50c1xuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnenVzdGFuZCc7XG5pbXBvcnQgeyBwZXJzaXN0IH0gZnJvbSAnenVzdGFuZC9taWRkbGV3YXJlJztcbmltcG9ydCB7IGRvYywgZ2V0RG9jLCBzZXREb2MsIHVwZGF0ZURvYywgZGVsZXRlRmllbGQgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICdAL2xpYi9maXJlYmFzZSc7XG5pbXBvcnQgeyBhdXRoIH0gZnJvbSAnQC9saWIvZmlyZWJhc2UnO1xuXG4vLyBTZWN0aW9uIHJlcHJlc2VudHMgYSBncm91cCBvZiBsZXZlbHMgKDUgbGV2ZWxzIHBlciBzZWN0aW9uLCA1IHNlY3Rpb25zIHRvdGFsKVxuZXhwb3J0IHR5cGUgU2VjdGlvbiA9IHtcbiAgaWQ6IG51bWJlcjtcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgaXNMb2NrZWQ6IGJvb2xlYW47XG4gIGlzQ29tcGxldGVkOiBib29sZWFuO1xuICBsZXZlbHM6IExldmVsW107XG59O1xuXG4vLyBMZXZlbCByZXByZXNlbnRzIGFuIGluZGl2aWR1YWwgY2hhbGxlbmdlIGxldmVsXG5leHBvcnQgdHlwZSBMZXZlbCA9IHtcbiAgaWQ6IG51bWJlcjtcbiAgdGl0bGU6IHN0cmluZztcbiAgaXNMb2NrZWQ6IGJvb2xlYW47XG4gIGlzQ29tcGxldGVkOiBib29sZWFuO1xuICBiZXN0U2NvcmU6IG51bWJlcjtcbiAgYXR0ZW1wdHM6IG51bWJlcjtcbiAgbGFzdFBsYXllZDogc3RyaW5nIHwgbnVsbDtcbn07XG5cbi8vIERhaWx5IHF1ZXN0IHJlcHJlc2VudGF0aW9uXG5leHBvcnQgdHlwZSBEYWlseVF1ZXN0ID0ge1xuICBpZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICByZXdhcmQ6IG51bWJlcjsgLy8gWFAgcmV3YXJkXG4gIHByb2dyZXNzOiBudW1iZXI7XG4gIHRhcmdldDogbnVtYmVyO1xuICBpc0NvbXBsZXRlZDogYm9vbGVhbjtcbiAgZXhwaXJlc0F0OiBzdHJpbmc7IC8vIElTTyBkYXRlIHN0cmluZ1xufTtcblxuLy8gVXNlciBwcm9maWxlIGRhdGEgKGNvbnNvbGlkYXRlZCBmcm9tIFVzZXJTZXJ2aWNlKVxuLy8gTm90ZTogdWlkIGlzIG5vdCBzdG9yZWQgc2luY2UgZG9jdW1lbnQgSUQgaXMgYWxyZWFkeSB0aGUgdXNlciBJRFxuZXhwb3J0IHR5cGUgVXNlclByb2ZpbGUgPSB7XG4gIGRpc3BsYXlOYW1lOiBzdHJpbmcgfCBudWxsO1xuICBlbWFpbDogc3RyaW5nIHwgbnVsbDtcbiAgcGhvdG9VUkw6IHN0cmluZyB8IG51bGw7XG4gIGpvaW5EYXRlOiBzdHJpbmc7XG4gIGxhc3RBY3RpdmVEYXRlOiBzdHJpbmc7XG4gIC8vIE5ldzogZ3JhZGUgbGV2ZWwgb25ib2FyZGluZyBzZWxlY3Rpb247IG51bGwgdW50aWwgdXNlciBwaWNrcyBvbmVcbiAgZ3JhZGVMZXZlbD86ICdHMV8yJyB8ICdHM180JyB8ICdHNV82JyB8IG51bGw7XG4gIHByZWZlcmVuY2VzOiB7XG4gICAgZW1haWxOb3RpZmljYXRpb25zOiBib29sZWFuO1xuICAgIGRhaWx5UmVtaW5kZXI6IGJvb2xlYW47XG4gIH07XG59O1xuXG4vLyBDaGFsbGVuZ2UgcmVzdWx0IHRyYWNraW5nXG5leHBvcnQgdHlwZSBDaGFsbGVuZ2VSZXN1bHQgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIGNoYWxsZW5nZVR5cGU6ICdtYWtlLXNlbnRlbmNlJyB8ICdtdWx0aXBsZS1jaG9pY2UnIHwgJ2NvbnZlcnNhdGlvbic7XG4gIHNjb3JlOiBudW1iZXI7XG4gIG1heFNjb3JlOiBudW1iZXI7XG4gIGNvbXBsZXRlZEF0OiBzdHJpbmc7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIGlzQ29ycmVjdDogYm9vbGVhbjtcbiAgZ2FtZVR5cGU6IHN0cmluZztcbn07XG5cbi8vIFJlY29yZCBvZiBjb21wbGV0ZWQgbGV2ZWxzIGZvciBwcm9ncmVzc2lvbiB0cmFja2luZ1xudHlwZSBMZXZlbFByb2dyZXNzID0ge1xuICBbZ2FtZVR5cGU6IHN0cmluZ106IHtcbiAgICBjdXJyZW50TGV2ZWw6IG51bWJlcjtcbiAgICBjdXJyZW50U2VjdGlvbjogbnVtYmVyO1xuICAgIHNlY3Rpb25zOiBTZWN0aW9uW107XG4gICAgeHA6IG51bWJlcjtcbiAgICBxdWVzdHM6IERhaWx5UXVlc3RbXTtcbiAgICBjb21wbGV0ZWRMZXZlbHM6IHN0cmluZ1tdO1xuICAgIGxhc3RQbGF5ZWRBdD86IHN0cmluZztcbiAgfVxufTtcblxuLy8gRGVmaW5lIGFjaGlldmVtZW50IHR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIEFjaGlldmVtZW50IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICB1bmxvY2tlZEF0Pzogc3RyaW5nO1xuICBnYW1lVHlwZT86IHN0cmluZzsgLy8gV2hpY2ggZ2FtZSB0eXBlIHRoaXMgYWNoaWV2ZW1lbnQgd2FzIGVhcm5lZCBpblxufVxuXG4vLyBHYW1lU3RhdGUgcmVwcmVzZW50cyB0aGUgZ2xvYmFsIGdhbWUgc3RhdGUgKGNvbnNvbGlkYXRlZCBkYXRhIG1vZGVsKVxudHlwZSBHYW1lU3RhdGUgPSB7XG4gIC8vIFVzZXIgcHJvZmlsZVxuICBwcm9maWxlOiBVc2VyUHJvZmlsZSB8IG51bGw7XG4gIFxuICAvLyBHYW1lIHN0YXRpc3RpY3NcbiAgc2NvcmU6IG51bWJlcjtcbiAgc3RyZWFrOiBudW1iZXI7XG4gIGxhc3RTdHJlYWtEYXRlOiBzdHJpbmc7XG4gIHN0cmVha1N0YXRlOiBcIm5vbmVcIiB8IFwiaW5hY3RpdmVcIiB8IFwiYWN0aXZlXCI7XG4gIHRvdGFsQ2hhbGxlbmdlc0NvbXBsZXRlZDogbnVtYmVyO1xuICBcbiAgLy8gR2FtZSBwcm9ncmVzc1xuICBwcm9ncmVzczogTGV2ZWxQcm9ncmVzcztcbiAgYWNoaWV2ZW1lbnRzOiBzdHJpbmdbXTsgLy8gRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCBleGlzdGluZyB1c2Vyc1xuICBnYW1lQWNoaWV2ZW1lbnRzOiB7XG4gICAgW2dhbWVUeXBlOiBzdHJpbmddOiBzdHJpbmdbXTsgLy8gR2FtZS1zcGVjaWZpYyBhY2hpZXZlbWVudHMgYnkgZ2FtZSB0eXBlXG4gIH07XG4gIFxuICAvLyBDaGFsbGVuZ2UgaGlzdG9yeVxuICByZWNlbnRDaGFsbGVuZ2VzOiBDaGFsbGVuZ2VSZXN1bHRbXTtcbiAgXG4gIC8vIEFjdGlvbnNcbiAgYWRkUG9pbnRzOiAocG9pbnRzOiBudW1iZXIsIGdhbWVUeXBlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGluY3JlYXNlU3RyZWFrOiAoKSA9PiB2b2lkO1xuICByZXNldFN0cmVhazogKCkgPT4gdm9pZDtcbiAgXG4gIC8vIEdhbWUgcHJvZ3Jlc3Npb25cbiAgY29tcGxldGVMZXZlbDogKGdhbWVUeXBlOiBzdHJpbmcsIHNlY3Rpb25JZDogbnVtYmVyLCBsZXZlbElkOiBudW1iZXIsIHNjb3JlPzogbnVtYmVyKSA9PiB2b2lkO1xuICBjYW5BY2Nlc3NMZXZlbDogKGdhbWVUeXBlOiBzdHJpbmcsIHNlY3Rpb25JZDogbnVtYmVyLCBsZXZlbElkOiBudW1iZXIpID0+IGJvb2xlYW47XG4gIHVubG9ja1NlY3Rpb246IChnYW1lVHlwZTogc3RyaW5nLCBzZWN0aW9uSWQ6IG51bWJlcikgPT4gdm9pZDtcbiAgaW5pdGlhbGl6ZUdhbWVQcm9ncmVzczogKGdhbWVUeXBlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIFxuICAvLyBEYWlseSBxdWVzdHNcbiAgYWRkUHJvZ3Jlc3NUb1F1ZXN0OiAoZ2FtZVR5cGU6IHN0cmluZywgcXVlc3RJZDogc3RyaW5nLCBhbW91bnQ6IG51bWJlcikgPT4gdm9pZDtcbiAgY29tcGxldGVRdWVzdDogKGdhbWVUeXBlOiBzdHJpbmcsIHF1ZXN0SWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgY2hlY2tBbmRSZWZyZXNoUXVlc3RzOiAoZ2FtZVR5cGU6IHN0cmluZykgPT4gdm9pZDtcbiAgcmVzZXRRdWVzdHM6IChnYW1lVHlwZTogc3RyaW5nKSA9PiB2b2lkO1xuICBjb21wbGV0ZVN0cmVha0JvbnVzUXVlc3Q6IChnYW1lVHlwZTogc3RyaW5nKSA9PiB2b2lkO1xuICBcbiAgLy8gQ2hhbGxlbmdlIHRyYWNraW5nXG4gIGFkZENoYWxsZW5nZVJlc3VsdDogKHJlc3VsdDogQ2hhbGxlbmdlUmVzdWx0KSA9PiB2b2lkO1xuICBcbiAgLy8gVXNlciBzcGVjaWZpYyBkYXRhXG4gIGxvYWRVc2VyUHJvZ3Jlc3M6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIHNhdmVVc2VyUHJvZ3Jlc3M6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIG1pZ3JhdGVVc2VyRGF0YT86ICgpID0+IFByb21pc2U8dm9pZD47XG4gIGNoZWNrU3RyZWFrUmVzZXQ6ICgpID0+IHZvaWQ7XG4gIGNoZWNrU3RyZWFrU3RhdHVzOiAoKSA9PiB2b2lkO1xuICBjb21wbGV0ZUdhbWU6IChnYW1lVHlwZTogc3RyaW5nLCBzY29yZTogbnVtYmVyLCBpc0NvcnJlY3Q6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIGVuc3VyZUdhbWVQcm9ncmVzc0V4aXN0czogKGdhbWVUeXBlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIFxuICAvLyBQcm9maWxlIG1hbmFnZW1lbnRcbiAgdXBkYXRlVXNlclByb2ZpbGU6ICh1cGRhdGVzOiBQYXJ0aWFsPFVzZXJQcm9maWxlPikgPT4gdm9pZDtcbn07XG5cbi8vIEhlbHBlciB0byBnZXQgdG9kYXkncyBkYXRlIGFzIElTTyBzdHJpbmcgZm9yIGNvbnNpc3RlbmN5XG5jb25zdCBnZXRUb2RheURhdGVTdHJpbmcgPSAoKSA9PiB7XG4gIC8vIFVzZSBjb25zaXN0ZW50IElTTyBmb3JtYXQgZm9yIGFsbCBkYXRlc1xuICByZXR1cm4gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xufTtcblxuLy8gSGVscGVyIHRvIGNoZWNrIGlmIHR3byBkYXRlcyBhcmUgY29uc2VjdXRpdmUgZGF5c1xuY29uc3QgaXNDb25zZWN1dGl2ZURheSA9IChwcmV2aW91c0RhdGU6IHN0cmluZywgY3VycmVudERhdGU6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICBpZiAoIXByZXZpb3VzRGF0ZSkgcmV0dXJuIGZhbHNlO1xuICBcbiAgLy8gUGFyc2UgZGF0ZXMgKHVzaW5nIERhdGUgY29uc3RydWN0b3Igd2l0aCBZWVlZLU1NLUREIGZvcm1hdClcbiAgY29uc3QgcHJldiA9IG5ldyBEYXRlKHByZXZpb3VzRGF0ZSk7XG4gIGNvbnN0IGN1cnIgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZSk7XG4gIFxuICAvLyBTZXQgdG8gc2FtZSB0aW1lIHRvIGNvbXBhcmUganVzdCB0aGUgZGF0ZXNcbiAgcHJldi5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgY3Vyci5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgXG4gIC8vIENhbGN1bGF0ZSBkaWZmZXJlbmNlIGluIGRheXNcbiAgY29uc3QgdGltZURpZmYgPSBjdXJyLmdldFRpbWUoKSAtIHByZXYuZ2V0VGltZSgpO1xuICBjb25zdCBkYXlzRGlmZiA9IHRpbWVEaWZmIC8gKDEwMDAgKiAzNjAwICogMjQpO1xuICBcbiAgLy8gUmV0dXJuIHRydWUgaWYgdGhlIGRhdGVzIGFyZSBleGFjdGx5IDEgZGF5IGFwYXJ0XG4gIHJldHVybiBNYXRoLnJvdW5kKGRheXNEaWZmKSA9PT0gMTtcbn07XG5cbi8vIEhlbHBlciB0byBjaGVjayBpZiBkYXRlcyBhcmUgdGhlIHNhbWUgZGF5XG5jb25zdCBpc1NhbWVEYXkgPSAoZGF0ZVN0cjE6IHN0cmluZywgZGF0ZVN0cjI6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICBpZiAoIWRhdGVTdHIxIHx8ICFkYXRlU3RyMikgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gZGF0ZVN0cjEgPT09IGRhdGVTdHIyO1xufTtcblxuLy8gSGVscGVyIHRvIGdldCB0b21vcnJvdydzIGRhdGUgYXMgSVNPIHN0cmluZyBmb3IgY29uc2lzdGVuY3lcbmNvbnN0IGdldFRvbW9ycm93RGF0ZVN0cmluZyA9ICgpOiBzdHJpbmcgPT4ge1xuICBjb25zdCB0b21vcnJvdyA9IG5ldyBEYXRlKCk7XG4gIHRvbW9ycm93LnNldERhdGUodG9tb3Jyb3cuZ2V0RGF0ZSgpICsgMSk7XG4gIHJldHVybiB0b21vcnJvdy50b0lTT1N0cmluZygpO1xufTtcblxuLy8gR2VuZXJhdGUgc2VjdGlvbnMgd2l0aCBsZXZlbHNcbmNvbnN0IGdlbmVyYXRlU2VjdGlvbnMgPSAoY291bnQ6IG51bWJlciA9IDUsIGxldmVsc1BlclNlY3Rpb246IG51bWJlciA9IDUpOiBTZWN0aW9uW10gPT4ge1xuICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY291bnQgfSkubWFwKChfLCBzZWN0aW9uSW5kZXgpID0+ICh7XG4gICAgaWQ6IHNlY3Rpb25JbmRleCxcbiAgICB0aXRsZTogYFNlY3Rpb24gJHtzZWN0aW9uSW5kZXggKyAxfWAsXG4gICAgZGVzY3JpcHRpb246IGBDb21wbGV0ZSBhbGwgbGV2ZWxzIGluIFNlY3Rpb24gJHtzZWN0aW9uSW5kZXggKyAxfWAsXG4gICAgaXNMb2NrZWQ6IHNlY3Rpb25JbmRleCAhPT0gMCwgLy8gT25seSBmaXJzdCBzZWN0aW9uIGlzIHVubG9ja2VkXG4gICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxuICAgIGxldmVsczogQXJyYXkuZnJvbSh7IGxlbmd0aDogbGV2ZWxzUGVyU2VjdGlvbiB9KS5tYXAoKF8sIGxldmVsSW5kZXgpID0+ICh7XG4gICAgICBpZDogbGV2ZWxJbmRleCxcbiAgICAgIHRpdGxlOiBgTGV2ZWwgJHtsZXZlbEluZGV4ICsgMX1gLFxuICAgICAgaXNMb2NrZWQ6IGxldmVsSW5kZXggIT09IDAsIC8vIE9ubHkgZmlyc3QgbGV2ZWwgaW4gZWFjaCBzZWN0aW9uIGlzIHVubG9ja2VkIGluaXRpYWxseVxuICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgYmVzdFNjb3JlOiAwLFxuICAgICAgYXR0ZW1wdHM6IDAsXG4gICAgICBsYXN0UGxheWVkOiBudWxsXG4gICAgfSkpXG4gIH0pKTtcbn07XG5cbi8vIEdlbmVyYXRlIGRhaWx5IHF1ZXN0c1xuY29uc3QgZ2VuZXJhdGVEYWlseVF1ZXN0cyA9ICgpOiBEYWlseVF1ZXN0W10gPT4ge1xuICAvLyBHZXQgdG9tb3Jyb3cncyBkYXRlIGluIFlZWVktTU0tREQgZm9ybWF0ICh1c2luZyBsb2NhbCB0aW1lKVxuICBjb25zdCBleHBpcmVzQXQgPSBnZXRUb21vcnJvd0RhdGVTdHJpbmcoKTtcbiAgXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgaWQ6ICdzdHJlYWstYm9udXMnLFxuICAgICAgdGl0bGU6ICdHZXQgMyBDb3JyZWN0IGluIGEgUm93JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQW5zd2VyIHRocmVlIHF1ZXN0aW9ucyBjb3JyZWN0bHkgaW4gYSByb3cnLFxuICAgICAgcmV3YXJkOiAxMCxcbiAgICAgIHByb2dyZXNzOiAwLFxuICAgICAgdGFyZ2V0OiAxLCAvLyBKdXN0IG5lZWRzIHRvIGJlIGFjaGlldmVkIG9uY2VcbiAgICAgIGlzQ29tcGxldGVkOiBmYWxzZSxcbiAgICAgIGV4cGlyZXNBdFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdjb21wbGV0ZS1nYW1lcycsXG4gICAgICB0aXRsZTogJ0NvbXBsZXRlIDMgR2FtZXMnLFxuICAgICAgZGVzY3JpcHRpb246ICdDb21wbGV0ZSBhbnkgMyBnYW1lcyB0b2RheSAoYW55IHNjb3JlKScsXG4gICAgICByZXdhcmQ6IDE1LFxuICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICB0YXJnZXQ6IDMsXG4gICAgICBpc0NvbXBsZXRlZDogZmFsc2UsXG4gICAgICBleHBpcmVzQXRcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAncGVyZmVjdC1zY29yZScsXG4gICAgICB0aXRsZTogJ1BlcmZlY3QgU2NvcmUnLFxuICAgICAgZGVzY3JpcHRpb246ICdDb21wbGV0ZSBhIGxldmVsIHdpdGggYSBwZXJmZWN0IHNjb3JlJyxcbiAgICAgIHJld2FyZDogMjAsXG4gICAgICBwcm9ncmVzczogMCxcbiAgICAgIHRhcmdldDogMSxcbiAgICAgIGlzQ29tcGxldGVkOiBmYWxzZSxcbiAgICAgIGV4cGlyZXNBdFxuICAgIH1cbiAgXTtcbn07XG5cbi8vIENvbGxlY3Rpb24gbmFtZSBmb3IgdXNlciBnYW1lIHByb2dyZXNzXG5jb25zdCBHQU1FX1BST0dSRVNTX0NPTExFQ1RJT04gPSAnZ2FtZVByb2dyZXNzJztcblxuZXhwb3J0IGNvbnN0IHVzZUdhbWVTdG9yZSA9IGNyZWF0ZTxHYW1lU3RhdGU+KCkoXG4gIHBlcnNpc3QoXG4gICAgKHNldCwgZ2V0KSA9PiAoe1xuICAgICAgLy8gSW5pdGlhbCBzdGF0ZVxuICAgICAgcHJvZmlsZTogbnVsbCxcbiAgICAgIHNjb3JlOiAwLFxuICAgICAgc3RyZWFrOiAwLFxuICAgICAgbGFzdFN0cmVha0RhdGU6ICcnLFxuICAgICAgc3RyZWFrU3RhdGU6ICdub25lJyBhcyAnbm9uZScgfCAnaW5hY3RpdmUnIHwgJ2FjdGl2ZScsXG4gICAgICB0b3RhbENoYWxsZW5nZXNDb21wbGV0ZWQ6IDAsXG4gICAgICBwcm9ncmVzczoge30sXG4gICAgICBhY2hpZXZlbWVudHM6IFtdLFxuICAgICAgZ2FtZUFjaGlldmVtZW50czoge30sXG4gICAgICByZWNlbnRDaGFsbGVuZ2VzOiBbXSxcbiAgICAgIFxuICAgICAgLy8gQmFzaWMgZ2FtZSBhY3Rpb25zXG4gICAgICBhZGRQb2ludHM6IChwb2ludHMsIGdhbWVUeXBlKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IGdhbWVQcm9ncmVzcyA9IHN0YXRlLnByb2dyZXNzW2dhbWVUeXBlXTtcbiAgICAgICAgaWYgKCFnYW1lUHJvZ3Jlc3MpIHJldHVybiBzdGF0ZTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBbWFAgRGVidWddIEFkZGluZyAke3BvaW50c30gcG9pbnRzIHRvICR7Z2FtZVR5cGV9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbWFAgRGVidWddIEN1cnJlbnQgWFA6ICR7Z2FtZVByb2dyZXNzLnhwfWApO1xuICAgICAgICBcbiAgICAgICAgLy8gUHJldmVudCBuZWdhdGl2ZSBYUCAtIGNhbGN1bGF0ZSBuZXcgWFAgZW5zdXJpbmcgaXQgZG9lc24ndCBnbyBiZWxvdyAwXG4gICAgICAgIGNvbnN0IG5ld1hQID0gTWF0aC5tYXgoMCwgZ2FtZVByb2dyZXNzLnhwICsgcG9pbnRzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBYUCBmb3IgdGhlIHNwZWNpZmljIGdhbWUgdHlwZVxuICAgICAgICBjb25zdCB1cGRhdGVkR2FtZVByb2dyZXNzID0ge1xuICAgICAgICAgIC4uLmdhbWVQcm9ncmVzcyxcbiAgICAgICAgICB4cDogbmV3WFBcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBbWFAgRGVidWddIE5ldyB0b3RhbCBYUDogJHt1cGRhdGVkR2FtZVByb2dyZXNzLnhwfWApO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGRhaWx5IHF1ZXN0IHByb2dyZXNzIGZvciBYUCAtIERJUkVDVExZIHVzZSB0aGUgZ2FtZSdzIHRvdGFsIFhQIHZhbHVlIGZvciBjb25zaXN0ZW5jeVxuICAgICAgICBjb25zdCB1cGRhdGVkUXVlc3RzID0gZ2FtZVByb2dyZXNzLnF1ZXN0cztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG5ld1N0YXRlID0ge1xuICAgICAgICAgIHNjb3JlOiBzdGF0ZS5zY29yZSArIHBvaW50cyxcbiAgICAgICAgICBwcm9ncmVzczoge1xuICAgICAgICAgICAgLi4uc3RhdGUucHJvZ3Jlc3MsXG4gICAgICAgICAgICBbZ2FtZVR5cGVdOiB7XG4gICAgICAgICAgICAgIC4uLnVwZGF0ZWRHYW1lUHJvZ3Jlc3MsXG4gICAgICAgICAgICAgIHF1ZXN0czogdXBkYXRlZFF1ZXN0c1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNhdmUgdG8gRmlyZWJhc2UgYWZ0ZXIgdXBkYXRpbmcgbG9jYWwgc3RhdGVcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBnZXQoKS5zYXZlVXNlclByb2dyZXNzKCksIDApO1xuICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICB9KSxcbiAgICAgIFxuICAgICAgaW5jcmVhc2VTdHJlYWs6ICgpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBnZXRUb2RheURhdGVTdHJpbmcoKTtcbiAgICAgICAgbGV0IG5ld1N0cmVhayA9IHN0YXRlLnN0cmVhaztcbiAgICAgICAgXG4gICAgICAgIC8vIENhc2UgMTogQWxyZWFkeSBsb2dnZWQgc3RyZWFrIHRvZGF5IC0gZG9uJ3QgaW5jcmVhc2UsIGp1c3QgbWFrZSBhY3RpdmVcbiAgICAgICAgaWYgKGlzU2FtZURheShzdGF0ZS5sYXN0U3RyZWFrRGF0ZSwgdG9kYXkpKSB7XG4gICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICAuLi5zdGF0ZSwgXG4gICAgICAgICAgICBzdHJlYWtTdGF0ZTogJ2FjdGl2ZScgXG4gICAgICAgICAgfTsgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENhc2UgMjogRmlyc3QgdGltZSBwbGF5aW5nIG9yIGNvbnRpbnVpbmcgc3RyZWFrIGZyb20geWVzdGVyZGF5XG4gICAgICAgIGlmIChpc0NvbnNlY3V0aXZlRGF5KHN0YXRlLmxhc3RTdHJlYWtEYXRlLCB0b2RheSkgfHwgIXN0YXRlLmxhc3RTdHJlYWtEYXRlKSB7XG4gICAgICAgICAgbmV3U3RyZWFrICs9IDE7XG4gICAgICAgIH0gXG4gICAgICAgIC8vIENhc2UgMzogTWlzc2VkIGEgZGF5IG9yIG1vcmUsIHJlc3RhcnQgc3RyZWFrIGZyb20gMVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBuZXdTdHJlYWsgPSAxOyAvLyBTdGFydCBhIG5ldyBzdHJlYWtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSB7XG4gICAgICAgICAgc3RyZWFrOiBuZXdTdHJlYWssXG4gICAgICAgICAgbGFzdFN0cmVha0RhdGU6IHRvZGF5LFxuICAgICAgICAgIHN0cmVha1N0YXRlOiAnYWN0aXZlJyBhcyAnbm9uZScgfCAnaW5hY3RpdmUnIHwgJ2FjdGl2ZSdcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNhdmUgdG8gRmlyZWJhc2UgYWZ0ZXIgdXBkYXRpbmcgbG9jYWwgc3RhdGVcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBnZXQoKS5zYXZlVXNlclByb2dyZXNzKCksIDApO1xuICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICB9KSxcbiAgICAgIFxuICAgICAgcmVzZXRTdHJlYWs6ICgpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSB7XG4gICAgICAgICAgc3RyZWFrOiAwLFxuICAgICAgICAgIGxhc3RTdHJlYWtEYXRlOiAnJyxcbiAgICAgICAgICBzdHJlYWtTdGF0ZTogJ25vbmUnIGFzICdub25lJyB8ICdpbmFjdGl2ZScgfCAnYWN0aXZlJ1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gU2F2ZSB0byBGaXJlYmFzZSBhZnRlciB1cGRhdGluZyBsb2NhbCBzdGF0ZVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGdldCgpLnNhdmVVc2VyUHJvZ3Jlc3MoKSwgMCk7XG4gICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgIH0pLFxuICAgICAgXG4gICAgICAvLyBQcm9ncmVzcyB0cmFja2luZ1xuICAgICAgaW5pdGlhbGl6ZUdhbWVQcm9ncmVzczogKGdhbWVUeXBlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHByb2dyZXNzIGFscmVhZHkgZXhpc3RzIGZvciB0aGlzIGdhbWUgdHlwZVxuICAgICAgICAgIGlmIChzdGF0ZS5wcm9ncmVzc1tnYW1lVHlwZV0gJiYgc3RhdGUucHJvZ3Jlc3NbZ2FtZVR5cGVdLnNlY3Rpb25zICYmIHN0YXRlLnByb2dyZXNzW2dhbWVUeXBlXS5zZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgR2FtZSBwcm9ncmVzcyBmb3IgJHtnYW1lVHlwZX0gYWxyZWFkeSBpbml0aWFsaXplZC5gKTtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coYEluaXRpYWxpemluZyBnYW1lIHByb2dyZXNzIGZvciAke2dhbWVUeXBlfWApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIERlZmF1bHQgc2VjdGlvbnMgd2l0aCA1IHNlY3Rpb25zIGFuZCA1IGxldmVscyBlYWNoXG4gICAgICAgICAgY29uc3Qgc2VjdGlvbnMgPSBnZW5lcmF0ZVNlY3Rpb25zKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmlyc3Qgc2VjdGlvbiBhbmQgZmlyc3QgbGV2ZWwgYXJlIGFsd2F5cyB1bmxvY2tlZFxuICAgICAgICAgIGlmIChzZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzZWN0aW9uc1swXS5pc0xvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2VjdGlvbnNbMF0ubGV2ZWxzICYmIHNlY3Rpb25zWzBdLmxldmVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHNlY3Rpb25zWzBdLmxldmVsc1swXS5pc0xvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBHZW5lcmF0ZSBmcmVzaCBkYWlseSBxdWVzdHMgaWYgbmVlZGVkXG4gICAgICAgICAgY29uc3QgcXVlc3RzID0gZ2VuZXJhdGVEYWlseVF1ZXN0cygpO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcm9ncmVzczoge1xuICAgICAgICAgICAgICAuLi5zdGF0ZS5wcm9ncmVzcyxcbiAgICAgICAgICAgICAgW2dhbWVUeXBlXToge1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zLFxuICAgICAgICAgICAgICAgIHhwOiAwLFxuICAgICAgICAgICAgICAgIHF1ZXN0cyxcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbjogMCxcbiAgICAgICAgICAgICAgICBjdXJyZW50TGV2ZWw6IDAsXG4gICAgICAgICAgICAgICAgY29tcGxldGVkTGV2ZWxzOiBbXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgXG4gICAgICBjb21wbGV0ZUxldmVsOiAoZ2FtZVR5cGU6IHN0cmluZywgc2VjdGlvbklkOiBudW1iZXIsIGxldmVsSWQ6IG51bWJlciwgc2NvcmU/OiBudW1iZXIpID0+IHtcbiAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGdhbWVQcm9ncmVzcyA9IHN0YXRlLnByb2dyZXNzW2dhbWVUeXBlXTtcbiAgICAgICAgICBpZiAoIWdhbWVQcm9ncmVzcykgcmV0dXJuIHN0YXRlO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWF0ZSBhIGRlZXAgY29weSBvZiBzZWN0aW9uc1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRTZWN0aW9ucyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZ2FtZVByb2dyZXNzLnNlY3Rpb25zKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2V0IHRoZSBzZWN0aW9uIGFuZCBsZXZlbFxuICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB1cGRhdGVkU2VjdGlvbnNbc2VjdGlvbklkXTtcbiAgICAgICAgICBpZiAoIXNlY3Rpb24gfHwgIXNlY3Rpb24ubGV2ZWxzW2xldmVsSWRdKSByZXR1cm4gc3RhdGU7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXBkYXRlIGxldmVsIHN0YXRzIC0gdGhpcyBoYXBwZW5zIHJlZ2FyZGxlc3Mgb2Ygc2NvcmVcbiAgICAgICAgICBjb25zdCBsZXZlbCA9IHNlY3Rpb24ubGV2ZWxzW2xldmVsSWRdO1xuICAgICAgICAgIGxldmVsLmF0dGVtcHRzID0gKGxldmVsLmF0dGVtcHRzIHx8IDApICsgMTtcbiAgICAgICAgICBsZXZlbC5sYXN0UGxheWVkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFN0b3JlIHRoZSBiZXN0IHNjb3JlIGlmIGhpZ2hlciB0aGFuIHByZXZpb3VzXG4gICAgICAgICAgaWYgKHNjb3JlICE9PSB1bmRlZmluZWQgJiYgKGxldmVsLmJlc3RTY29yZSA9PT0gdW5kZWZpbmVkIHx8IHNjb3JlID4gbGV2ZWwuYmVzdFNjb3JlKSkge1xuICAgICAgICAgICAgbGV2ZWwuYmVzdFNjb3JlID0gc2NvcmU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWF0ZSBhIHVuaXF1ZSBJRCBmb3IgdGhpcyBsZXZlbCB0byB0cmFjayBjb21wbGV0aW9uXG4gICAgICAgICAgY29uc3QgbGV2ZWxLZXkgPSBgJHtzZWN0aW9uSWR9LSR7bGV2ZWxJZH1gO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFRyYWNrIGNvbXBsZXRlZCBsZXZlbHMgZm9yIHN1bW1hcnkgc3RhdHNcbiAgICAgICAgICBsZXQgY29tcGxldGVkTGV2ZWxzID0gWy4uLihnYW1lUHJvZ3Jlc3MuY29tcGxldGVkTGV2ZWxzIHx8IFtdKV07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2V0IGFjaGlldmVtZW50cyBhcnJheXNcbiAgICAgICAgICBsZXQgYWNoaWV2ZW1lbnRzID0gWy4uLihzdGF0ZS5hY2hpZXZlbWVudHMgfHwgW10pXTtcbiAgICAgICAgICBsZXQgZ2FtZVR5cGVBY2hpZXZlbWVudHMgPSBbLi4uKHN0YXRlLmdhbWVBY2hpZXZlbWVudHNbZ2FtZVR5cGVdIHx8IFtdKV07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVHJhY2sgd2hlcmUgdGhlIHVzZXIgc2hvdWxkIGdvIG5leHQgKGN1cnJlbnQgcG9zaXRpb24pXG4gICAgICAgICAgbGV0IG5leHRTZWN0aW9uSWQgPSBzZWN0aW9uSWQ7XG4gICAgICAgICAgbGV0IG5leHRMZXZlbElkID0gbGV2ZWxJZDtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBNYXJrIGxldmVsIGFzIGNvbXBsZXRlZCBpZiBzY29yZSBpcyBhdCBsZWFzdCA4MCUgKHRocmVzaG9sZCBmb3IgY29tcGxldGluZyBhIGxldmVsKVxuICAgICAgICAgIGNvbnN0IGlzTGV2ZWxDb21wbGV0ZWQgPSBzY29yZSAhPT0gdW5kZWZpbmVkICYmIHNjb3JlID49IDgwO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChpc0xldmVsQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAvLyBNYXJrIHRoZSBsZXZlbCBhcyBjb21wbGV0ZWRcbiAgICAgICAgICAgIGxldmVsLmlzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWRkIHRvIGNvbXBsZXRlZCBsZXZlbHMgYXJyYXkgaWYgbm90IGFscmVhZHkgdGhlcmVcbiAgICAgICAgICAgIGlmICghY29tcGxldGVkTGV2ZWxzLmluY2x1ZGVzKGxldmVsS2V5KSkge1xuICAgICAgICAgICAgICBjb21wbGV0ZWRMZXZlbHMucHVzaChsZXZlbEtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBcIlBlcmZlY3QgU2NvcmVcIiBhY2hpZXZlbWVudCAtIHNjb3JlIG11c3QgYmUgYXQgbGVhc3QgMTAwIChpbmNsdWRpbmcgYm9udXNlcylcbiAgICAgICAgICAgIGlmIChzY29yZSA+PSAxMDAgJiYgIWdhbWVUeXBlQWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCdwZXJmZWN0LXNjb3JlJykpIHtcbiAgICAgICAgICAgICAgLy8gQWRkIHRvIGdhbWUtc3BlY2lmaWMgYWNoaWV2ZW1lbnRzXG4gICAgICAgICAgICAgIGdhbWVUeXBlQWNoaWV2ZW1lbnRzLnB1c2goJ3BlcmZlY3Qtc2NvcmUnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEFsc28gYWRkIHRvIGdsb2JhbCBhY2hpZXZlbWVudHMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgaWYgKCFhY2hpZXZlbWVudHMuaW5jbHVkZXMoJ3BlcmZlY3Qtc2NvcmUnKSkge1xuICAgICAgICAgICAgICAgIGFjaGlldmVtZW50cy5wdXNoKCdwZXJmZWN0LXNjb3JlJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbQWNoaWV2ZW1lbnRdIFVubG9ja2VkOiBQZXJmZWN0IFNjb3JlIGluICR7Z2FtZVR5cGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgbmV4dCBsZXZlbCBJRCAtIGFkdmFuY2UgdG8gdGhlIG5leHQgbGV2ZWxcbiAgICAgICAgICAgIGlmIChsZXZlbElkIDwgc2VjdGlvbi5sZXZlbHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAvLyBNb3ZlIHRvIHRoZSBuZXh0IGxldmVsIGluIHRoZSBzYW1lIHNlY3Rpb25cbiAgICAgICAgICAgICAgbmV4dExldmVsSWQgPSBsZXZlbElkICsgMTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFVubG9jayB0aGUgbmV4dCBsZXZlbFxuICAgICAgICAgICAgICBzZWN0aW9uLmxldmVsc1tuZXh0TGV2ZWxJZF0uaXNMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAvLyBJZiB0aGlzIHdhcyB0aGUgbGFzdCBsZXZlbCBpbiB0aGUgc2VjdGlvbiwgbW92ZSB0byB0aGUgbmV4dCBzZWN0aW9uXG4gICAgICAgICAgICBlbHNlIGlmIChsZXZlbElkID09PSBzZWN0aW9uLmxldmVscy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgIHNlY3Rpb24uaXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIFwiU2VjdGlvbiBDaGFtcGlvblwiIGFjaGlldmVtZW50XG4gICAgICAgICAgICAgIC8vIEEgc2VjdGlvbiBpcyBjb25zaWRlcmVkIGNvbXBsZXRlZCB3aGVuIGFsbCBpdHMgbGV2ZWxzIGFyZSBjb21wbGV0ZWRcbiAgICAgICAgICAgICAgY29uc3QgaXNTZWN0aW9uQ29tcGxldGVkID0gc2VjdGlvbi5sZXZlbHMuZXZlcnkoKGx2bDogTGV2ZWwpID0+IGx2bC5pc0NvbXBsZXRlZCk7XG4gICAgICAgICAgICAgIGlmIChpc1NlY3Rpb25Db21wbGV0ZWQgJiYgIWdhbWVUeXBlQWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCdzZWN0aW9uLWNoYW1waW9uJykpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgdG8gZ2FtZS1zcGVjaWZpYyBhY2hpZXZlbWVudHNcbiAgICAgICAgICAgICAgICBnYW1lVHlwZUFjaGlldmVtZW50cy5wdXNoKCdzZWN0aW9uLWNoYW1waW9uJyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQWxzbyBhZGQgdG8gZ2xvYmFsIGFjaGlldmVtZW50cyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgICAgICAgICAgICAgIGlmICghYWNoaWV2ZW1lbnRzLmluY2x1ZGVzKCdzZWN0aW9uLWNoYW1waW9uJykpIHtcbiAgICAgICAgICAgICAgICAgIGFjaGlldmVtZW50cy5wdXNoKCdzZWN0aW9uLWNoYW1waW9uJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbQWNoaWV2ZW1lbnRdIFVubG9ja2VkOiBTZWN0aW9uIENoYW1waW9uIGluICR7Z2FtZVR5cGV9YCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIE1vdmUgdG8gdGhlIG5leHQgc2VjdGlvbiBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgaWYgKHNlY3Rpb25JZCA8IHVwZGF0ZWRTZWN0aW9ucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgbmV4dFNlY3Rpb25JZCA9IHNlY3Rpb25JZCArIDE7XG4gICAgICAgICAgICAgICAgbmV4dExldmVsSWQgPSAwOyAvLyBTdGFydCBhdCB0aGUgZmlyc3QgbGV2ZWwgb2YgdGhlIG5leHQgc2VjdGlvblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFVubG9jayB0aGUgbmV4dCBzZWN0aW9uXG4gICAgICAgICAgICAgICAgdXBkYXRlZFNlY3Rpb25zW25leHRTZWN0aW9uSWRdLmlzTG9ja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVW5sb2NrIHRoZSBmaXJzdCBsZXZlbCBvZiB0aGUgbmV4dCBzZWN0aW9uXG4gICAgICAgICAgICAgICAgdXBkYXRlZFNlY3Rpb25zW25leHRTZWN0aW9uSWRdLmxldmVsc1swXS5pc0xvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVwZGF0ZSBxdWVzdCBwcm9ncmVzcyBmb3IgZ2FtZSBjb21wbGV0aW9uXG4gICAgICAgICAgY29uc3QgdXBkYXRlZFF1ZXN0cyA9IGdhbWVQcm9ncmVzcy5xdWVzdHMubWFwKHF1ZXN0ID0+IHtcbiAgICAgICAgICAgIC8vIEZvciB0aGUgJ3BlcmZlY3Qtc2NvcmUnIHF1ZXN0LCBjb3VudCBnYW1lcyB3aXRoIGEgc2NvcmUgb2YgYXQgbGVhc3QgMTAwIChpbmNsdWRpbmcgYm9udXNlcylcbiAgICAgICAgICAgIGlmIChxdWVzdC5pZCA9PT0gJ3BlcmZlY3Qtc2NvcmUnICYmICFxdWVzdC5pc0NvbXBsZXRlZCAmJiBzY29yZSAhPT0gdW5kZWZpbmVkICYmIHNjb3JlID49IDEwMCkge1xuICAgICAgICAgICAgICBjb25zdCBuZXdQcm9ncmVzcyA9IE1hdGgubWluKHF1ZXN0LnByb2dyZXNzICsgMSwgcXVlc3QudGFyZ2V0KTtcbiAgICAgICAgICAgICAgY29uc3QgaXNDb21wbGV0ZWQgPSBuZXdQcm9ncmVzcyA+PSBxdWVzdC50YXJnZXQ7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLnF1ZXN0LFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiBuZXdQcm9ncmVzcyxcbiAgICAgICAgICAgICAgICBpc0NvbXBsZXRlZFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gcXVlc3Q7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIFhQIE1hc3RlciBhY2hpZXZlbWVudFxuICAgICAgICAgIGlmIChnYW1lUHJvZ3Jlc3MueHAgPj0gMTAwMCAmJiAhZ2FtZVR5cGVBY2hpZXZlbWVudHMuaW5jbHVkZXMoJ3hwLW1hc3RlcicpKSB7XG4gICAgICAgICAgICAvLyBBZGQgdG8gZ2FtZS1zcGVjaWZpYyBhY2hpZXZlbWVudHNcbiAgICAgICAgICAgIGdhbWVUeXBlQWNoaWV2ZW1lbnRzLnB1c2goJ3hwLW1hc3RlcicpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBbHNvIGFkZCB0byBnbG9iYWwgYWNoaWV2ZW1lbnRzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgICBpZiAoIWFjaGlldmVtZW50cy5pbmNsdWRlcygneHAtbWFzdGVyJykpIHtcbiAgICAgICAgICAgICAgYWNoaWV2ZW1lbnRzLnB1c2goJ3hwLW1hc3RlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0FjaGlldmVtZW50XSBVbmxvY2tlZDogWFAgTWFzdGVyIGluICR7Z2FtZVR5cGV9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByZXBhcmUgdXBkYXRlZCBnYW1lQWNoaWV2ZW1lbnRzIG9iamVjdFxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRHYW1lQWNoaWV2ZW1lbnRzID0ge1xuICAgICAgICAgICAgLi4uc3RhdGUuZ2FtZUFjaGlldmVtZW50cyxcbiAgICAgICAgICAgIFtnYW1lVHlwZV06IGdhbWVUeXBlQWNoaWV2ZW1lbnRzXG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBQcmVwYXJlIHVwZGF0ZWQgc3RhdGVcbiAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICAgIGFjaGlldmVtZW50cywgLy8gVXBkYXRlIGdsb2JhbCBhY2hpZXZlbWVudHMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgIGdhbWVBY2hpZXZlbWVudHM6IHVwZGF0ZWRHYW1lQWNoaWV2ZW1lbnRzLCAvLyBVcGRhdGUgZ2FtZS1zcGVjaWZpYyBhY2hpZXZlbWVudHNcbiAgICAgICAgICAgIHByb2dyZXNzOiB7XG4gICAgICAgICAgICAgIC4uLnN0YXRlLnByb2dyZXNzLFxuICAgICAgICAgICAgICBbZ2FtZVR5cGVdOiB7XG4gICAgICAgICAgICAgICAgLi4uZ2FtZVByb2dyZXNzLFxuICAgICAgICAgICAgICAgIHNlY3Rpb25zOiB1cGRhdGVkU2VjdGlvbnMsXG4gICAgICAgICAgICAgICAgcXVlc3RzOiB1cGRhdGVkUXVlc3RzLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZExldmVscywgLy8gVXBkYXRlIGNvbXBsZXRlZCBsZXZlbHMgdHJhY2tpbmdcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGN1cnJlbnQgcG9zaXRpb24gdG8gdGhlIG5leHQgbGV2ZWxcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbjogbmV4dFNlY3Rpb25JZCxcbiAgICAgICAgICAgICAgICBjdXJyZW50TGV2ZWw6IG5leHRMZXZlbElkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIExvZyB0aGUgbGV2ZWwgdHJhbnNpdGlvblxuICAgICAgICAgIGNvbnNvbGUubG9nKGBbUHJvZ3Jlc3NdIEFkdmFuY2VkIHRvIFNlY3Rpb24gJHtuZXh0U2VjdGlvbklkfSwgTGV2ZWwgJHtuZXh0TGV2ZWxJZH1gKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTYXZlIHRvIEZpcmViYXNlIGFmdGVyIHVwZGF0aW5nIGxvY2FsIHN0YXRlXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBnZXQoKS5zYXZlVXNlclByb2dyZXNzKCksIDApO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgXG4gICAgICBjYW5BY2Nlc3NMZXZlbDogKGdhbWVUeXBlOiBzdHJpbmcsIHNlY3Rpb25JZDogbnVtYmVyLCBsZXZlbElkOiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIGdhbWUgcHJvZ3Jlc3MgZXhpc3RzXG4gICAgICAgIGlmICghc3RhdGUucHJvZ3Jlc3MgfHwgIXN0YXRlLnByb2dyZXNzW2dhbWVUeXBlXSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZ2FtZVByb2dyZXNzID0gc3RhdGUucHJvZ3Jlc3NbZ2FtZVR5cGVdO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgc2VjdGlvbnMgYXJyYXkgZXhpc3RzIGFuZCBzZWN0aW9uSWQgaXMgdmFsaWRcbiAgICAgICAgaWYgKCFnYW1lUHJvZ3Jlc3Muc2VjdGlvbnMgfHwgIUFycmF5LmlzQXJyYXkoZ2FtZVByb2dyZXNzLnNlY3Rpb25zKSB8fCBcbiAgICAgICAgICAgIHNlY3Rpb25JZCA8IDAgfHwgc2VjdGlvbklkID49IGdhbWVQcm9ncmVzcy5zZWN0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBnYW1lUHJvZ3Jlc3Muc2VjdGlvbnNbc2VjdGlvbklkXTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHNlY3Rpb24gaXMgbG9ja2VkXG4gICAgICAgIGlmICghc2VjdGlvbiB8fCBzZWN0aW9uLmlzTG9ja2VkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBsZXZlbHMgYXJyYXkgZXhpc3RzIGFuZCBsZXZlbElkIGlzIHZhbGlkXG4gICAgICAgIGlmICghc2VjdGlvbi5sZXZlbHMgfHwgIUFycmF5LmlzQXJyYXkoc2VjdGlvbi5sZXZlbHMpIHx8IFxuICAgICAgICAgICAgbGV2ZWxJZCA8IDAgfHwgbGV2ZWxJZCA+PSBzZWN0aW9uLmxldmVscy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxldmVsID0gc2VjdGlvbi5sZXZlbHNbbGV2ZWxJZF07XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBsZXZlbCBleGlzdHMgYW5kIGlzIG5vdCBsb2NrZWRcbiAgICAgICAgcmV0dXJuIGxldmVsICYmICFsZXZlbC5pc0xvY2tlZDtcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIHVubG9ja1NlY3Rpb246IChnYW1lVHlwZTogc3RyaW5nLCBzZWN0aW9uSWQ6IG51bWJlcikgPT4ge1xuICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgY29uc3QgZ2FtZVByb2dyZXNzID0gc3RhdGUucHJvZ3Jlc3NbZ2FtZVR5cGVdO1xuICAgICAgICAgIGlmICghZ2FtZVByb2dyZXNzKSByZXR1cm4gc3RhdGU7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgdXBkYXRlZFNlY3Rpb25zID0gWy4uLmdhbWVQcm9ncmVzcy5zZWN0aW9uc107XG4gICAgICAgICAgaWYgKHVwZGF0ZWRTZWN0aW9uc1tzZWN0aW9uSWRdKSB7XG4gICAgICAgICAgICB1cGRhdGVkU2VjdGlvbnNbc2VjdGlvbklkXS5pc0xvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gQWxzbyB1bmxvY2sgdGhlIGZpcnN0IGxldmVsXG4gICAgICAgICAgICBpZiAodXBkYXRlZFNlY3Rpb25zW3NlY3Rpb25JZF0ubGV2ZWxzWzBdKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZWRTZWN0aW9uc1tzZWN0aW9uSWRdLmxldmVsc1swXS5pc0xvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICAgIHByb2dyZXNzOiB7XG4gICAgICAgICAgICAgIC4uLnN0YXRlLnByb2dyZXNzLFxuICAgICAgICAgICAgICBbZ2FtZVR5cGVdOiB7XG4gICAgICAgICAgICAgICAgLi4uZ2FtZVByb2dyZXNzLFxuICAgICAgICAgICAgICAgIHNlY3Rpb25zOiB1cGRhdGVkU2VjdGlvbnNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2F2ZSB0byBGaXJlYmFzZSBhZnRlciB1cGRhdGluZyBsb2NhbCBzdGF0ZVxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZ2V0KCkuc2F2ZVVzZXJQcm9ncmVzcygpLCAwKTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgLy8gRGFpbHkgcXVlc3RzXG4gICAgICBhZGRQcm9ncmVzc1RvUXVlc3Q6IChnYW1lVHlwZTogc3RyaW5nLCBxdWVzdElkOiBzdHJpbmcsIGFtb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBjb25zdCBnYW1lUHJvZ3Jlc3MgPSBzdGF0ZS5wcm9ncmVzc1tnYW1lVHlwZV07XG4gICAgICAgICAgaWYgKCFnYW1lUHJvZ3Jlc3MpIHJldHVybiBzdGF0ZTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCB1cGRhdGVkUXVlc3RzID0gZ2FtZVByb2dyZXNzLnF1ZXN0cy5tYXAocXVlc3QgPT4ge1xuICAgICAgICAgICAgaWYgKHF1ZXN0LmlkID09PSBxdWVzdElkICYmICFxdWVzdC5pc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICBjb25zdCBuZXdQcm9ncmVzcyA9IE1hdGgubWluKHF1ZXN0LnByb2dyZXNzICsgYW1vdW50LCBxdWVzdC50YXJnZXQpO1xuICAgICAgICAgICAgICBjb25zdCBpc0NvbXBsZXRlZCA9IG5ld1Byb2dyZXNzID49IHF1ZXN0LnRhcmdldDtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFdoZW4gYSBxdWVzdCBjb21wbGV0ZXMsIGl0IGF1dG9tYXRpY2FsbHkgZ2l2ZXMgaXRzIHJld2FyZFxuICAgICAgICAgICAgICBpZiAoaXNDb21wbGV0ZWQgJiYgIXF1ZXN0LmlzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFF1ZXN0ICR7cXVlc3QudGl0bGV9IGNvbXBsZXRlZCEgUmV3YXJkOiAke3F1ZXN0LnJld2FyZH0gWFBgKTtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHdoZXJlIHRoZSBleHRyYSBYUCBpcyBjb21pbmcgZnJvbSAtIGF1dG9tYXRpYyBxdWVzdCByZXdhcmRzXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBnZXQoKS5hZGRQb2ludHMocXVlc3QucmV3YXJkLCBnYW1lVHlwZSksIDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLnF1ZXN0LFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiBuZXdQcm9ncmVzcywgIC8vIFVzZSBleGFjdCBzYW1lIFhQIHZhbHVlIGFzIHRoZSBnYW1lIHRvdGFsXG4gICAgICAgICAgICAgICAgaXNDb21wbGV0ZWRcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBxdWVzdDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICAgIHByb2dyZXNzOiB7XG4gICAgICAgICAgICAgIC4uLnN0YXRlLnByb2dyZXNzLFxuICAgICAgICAgICAgICBbZ2FtZVR5cGVdOiB7XG4gICAgICAgICAgICAgICAgLi4uZ2FtZVByb2dyZXNzLFxuICAgICAgICAgICAgICAgIHF1ZXN0czogdXBkYXRlZFF1ZXN0c1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTYXZlIHRvIEZpcmViYXNlIGFmdGVyIHVwZGF0aW5nIGxvY2FsIHN0YXRlXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBnZXQoKS5zYXZlVXNlclByb2dyZXNzKCksIDApO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgXG4gICAgICBjb21wbGV0ZVF1ZXN0OiAoZ2FtZVR5cGU6IHN0cmluZywgcXVlc3RJZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAvLyBTa2lwIGlmIG5vIHByb2dyZXNzIGRhdGEgZm9yIHRoaXMgZ2FtZSB0eXBlXG4gICAgICAgICAgaWYgKCFzdGF0ZS5wcm9ncmVzcyB8fCAhc3RhdGUucHJvZ3Jlc3NbZ2FtZVR5cGVdKSByZXR1cm4gc3RhdGU7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2V0IHRoZSBxdWVzdHMgZm9yIHRoaXMgc3BlY2lmaWMgZ2FtZSB0eXBlXG4gICAgICAgICAgY29uc3QgZ2FtZVByb2dyZXNzID0gc3RhdGUucHJvZ3Jlc3NbZ2FtZVR5cGVdO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVwZGF0ZSBvbmx5IHRoZSBzdHJlYWstYm9udXMgcXVlc3QgZm9yIHRoaXMgZ2FtZSB0eXBlXG4gICAgICAgICAgY29uc3QgdXBkYXRlZFF1ZXN0cyA9IGdhbWVQcm9ncmVzcy5xdWVzdHMubWFwKHF1ZXN0ID0+IHtcbiAgICAgICAgICAgIGlmIChxdWVzdC5pZCA9PT0gcXVlc3RJZCkge1xuICAgICAgICAgICAgICAvLyBHaXZlIFhQIHJld2FyZCBmb3IgY29tcGxldGluZyB0aGUgcXVlc3RcbiAgICAgICAgICAgICAgaWYgKCFxdWVzdC5pc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZ2V0KCkuYWRkUG9pbnRzKHF1ZXN0LnJld2FyZCwgZ2FtZVR5cGUpLCAwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5xdWVzdCxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogcXVlc3QudGFyZ2V0LFxuICAgICAgICAgICAgICAgIGlzQ29tcGxldGVkOiB0cnVlXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcXVlc3Q7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ3JlYXRlIHRoZSB1cGRhdGVkIHByb2dyZXNzIGZvciBqdXN0IHRoaXMgZ2FtZSB0eXBlXG4gICAgICAgICAgY29uc3QgdXBkYXRlZFByb2dyZXNzID0ge1xuICAgICAgICAgICAgLi4uc3RhdGUucHJvZ3Jlc3MsXG4gICAgICAgICAgICBbZ2FtZVR5cGVdOiB7XG4gICAgICAgICAgICAgIC4uLmdhbWVQcm9ncmVzcyxcbiAgICAgICAgICAgICAgcXVlc3RzOiB1cGRhdGVkUXVlc3RzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTYXZlIHRvIEZpcmViYXNlIGFmdGVyIHVwZGF0aW5nXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBnZXQoKS5zYXZlVXNlclByb2dyZXNzKCksIDApO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7IHByb2dyZXNzOiB1cGRhdGVkUHJvZ3Jlc3MgfTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgXG4gICAgICBjaGVja0FuZFJlZnJlc2hRdWVzdHM6IChnYW1lVHlwZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBjb25zdCBnYW1lUHJvZ3Jlc3MgPSBzdGF0ZS5wcm9ncmVzc1tnYW1lVHlwZV07XG4gICAgICAgICAgaWYgKCFnYW1lUHJvZ3Jlc3MpIHJldHVybiBzdGF0ZTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCB0b2RheSA9IGdldFRvZGF5RGF0ZVN0cmluZygpO1xuICAgICAgICAgIGxldCBxdWVzdHNOZWVkUmVzZXQgPSBmYWxzZTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiBhbnkgcXVlc3RzIGhhdmUgZXhwaXJlZFxuICAgICAgICAgIGlmIChnYW1lUHJvZ3Jlc3MucXVlc3RzICYmIEFycmF5LmlzQXJyYXkoZ2FtZVByb2dyZXNzLnF1ZXN0cykpIHtcbiAgICAgICAgICAgIGdhbWVQcm9ncmVzcy5xdWVzdHMuZm9yRWFjaChxdWVzdCA9PiB7XG4gICAgICAgICAgICAgIC8vIENvbXBhcmUgZGF0ZXMgaW4gWVlZWS1NTS1ERCBmb3JtYXQgKGxvY2FsIHRpbWUpXG4gICAgICAgICAgICAgIC8vIElmIHRoZSBleHBpcmF0aW9uIGRhdGUgaXMgdG9kYXkgb3IgZWFybGllciwgdGhlIHF1ZXN0IGhhcyBleHBpcmVkXG4gICAgICAgICAgICAgIGlmIChxdWVzdC5leHBpcmVzQXQgPD0gdG9kYXkpIHtcbiAgICAgICAgICAgICAgICBxdWVzdHNOZWVkUmVzZXQgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgcXVlc3RzIGFycmF5IGRvZXNuJ3QgZXhpc3Qgb3IgaXMgbm90IGFuIGFycmF5LCB3ZSBuZWVkIHRvIHJlc2V0XG4gICAgICAgICAgICBxdWVzdHNOZWVkUmVzZXQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJZiBxdWVzdHMgbmVlZCB0byBiZSByZXNldCwgZ2VuZXJhdGUgbmV3IG9uZXNcbiAgICAgICAgICBpZiAocXVlc3RzTmVlZFJlc2V0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUmVzZXR0aW5nIHF1ZXN0cyBmb3IgJHtnYW1lVHlwZX0gYXMgdGhleSBoYXZlIGV4cGlyZWRgKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YXRlID0ge1xuICAgICAgICAgICAgICBwcm9ncmVzczoge1xuICAgICAgICAgICAgICAgIC4uLnN0YXRlLnByb2dyZXNzLFxuICAgICAgICAgICAgICAgIFtnYW1lVHlwZV06IHtcbiAgICAgICAgICAgICAgICAgIC4uLmdhbWVQcm9ncmVzcyxcbiAgICAgICAgICAgICAgICAgIHF1ZXN0czogZ2VuZXJhdGVEYWlseVF1ZXN0cygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTYXZlIHRvIEZpcmViYXNlIGFmdGVyIHVwZGF0aW5nIGxvY2FsIHN0YXRlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGdldCgpLnNhdmVVc2VyUHJvZ3Jlc3MoKSwgMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIHJlc2V0UXVlc3RzOiAoZ2FtZVR5cGU6IHN0cmluZykgPT4ge1xuICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgY29uc3QgZ2FtZVByb2dyZXNzID0gc3RhdGUucHJvZ3Jlc3NbZ2FtZVR5cGVdO1xuICAgICAgICAgIGlmICghZ2FtZVByb2dyZXNzKSByZXR1cm4gc3RhdGU7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2VuZXJhdGUgZnJlc2ggcXVlc3RzXG4gICAgICAgICAgY29uc3QgZnJlc2hRdWVzdHMgPSBnZW5lcmF0ZURhaWx5UXVlc3RzKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgbmV3U3RhdGUgPSB7XG4gICAgICAgICAgICBwcm9ncmVzczoge1xuICAgICAgICAgICAgICAuLi5zdGF0ZS5wcm9ncmVzcyxcbiAgICAgICAgICAgICAgW2dhbWVUeXBlXToge1xuICAgICAgICAgICAgICAgIC4uLmdhbWVQcm9ncmVzcyxcbiAgICAgICAgICAgICAgICBxdWVzdHM6IGZyZXNoUXVlc3RzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNhdmUgdG8gRmlyZWJhc2UgYWZ0ZXIgdXBkYXRpbmcgbG9jYWwgc3RhdGVcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGdldCgpLnNhdmVVc2VyUHJvZ3Jlc3MoKSwgMCk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIGNvbXBsZXRlU3RyZWFrQm9udXNRdWVzdDogKGdhbWVUeXBlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIC8vIFNraXAgaWYgbm8gcHJvZ3Jlc3MgZGF0YSBmb3IgdGhpcyBnYW1lIHR5cGVcbiAgICAgICAgICBpZiAoIXN0YXRlLnByb2dyZXNzIHx8ICFzdGF0ZS5wcm9ncmVzc1tnYW1lVHlwZV0pIHJldHVybiBzdGF0ZTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBHZXQgdGhlIHF1ZXN0cyBmb3IgdGhpcyBzcGVjaWZpYyBnYW1lIHR5cGVcbiAgICAgICAgICBjb25zdCBnYW1lUHJvZ3Jlc3MgPSBzdGF0ZS5wcm9ncmVzc1tnYW1lVHlwZV07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXBkYXRlIG9ubHkgdGhlIHN0cmVhay1ib251cyBxdWVzdCBmb3IgdGhpcyBnYW1lIHR5cGVcbiAgICAgICAgICBjb25zdCB1cGRhdGVkUXVlc3RzID0gZ2FtZVByb2dyZXNzLnF1ZXN0cy5tYXAocXVlc3QgPT4ge1xuICAgICAgICAgICAgaWYgKHF1ZXN0LmlkID09PSAnc3RyZWFrLWJvbnVzJyAmJiAhcXVlc3QuaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5xdWVzdCxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogMSxcbiAgICAgICAgICAgICAgICBpc0NvbXBsZXRlZDogdHJ1ZVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHF1ZXN0O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWF0ZSB0aGUgdXBkYXRlZCBwcm9ncmVzcyBmb3IganVzdCB0aGlzIGdhbWUgdHlwZVxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgIC4uLnN0YXRlLnByb2dyZXNzLFxuICAgICAgICAgICAgW2dhbWVUeXBlXToge1xuICAgICAgICAgICAgICAuLi5nYW1lUHJvZ3Jlc3MsXG4gICAgICAgICAgICAgIHF1ZXN0czogdXBkYXRlZFF1ZXN0c1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2F2ZSB0byBGaXJlYmFzZSBhZnRlciB1cGRhdGluZ1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZ2V0KCkuc2F2ZVVzZXJQcm9ncmVzcygpLCAwKTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4geyBwcm9ncmVzczogdXBkYXRlZFByb2dyZXNzIH07XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgLy8gQ2hhbGxlbmdlIHRyYWNraW5nXG4gICAgICBhZGRDaGFsbGVuZ2VSZXN1bHQ6IChyZXN1bHQ6IENoYWxsZW5nZVJlc3VsdCkgPT4ge1xuICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3Q2hhbGxlbmdlcyA9IFsuLi5zdGF0ZS5yZWNlbnRDaGFsbGVuZ2VzLCByZXN1bHRdO1xuICAgICAgICAgIC8vIENhcCBhdCA1MCBjaGFsbGVuZ2VzIHRvIHByZXZlbnQgZG9jdW1lbnQgc2l6ZSBpc3N1ZXNcbiAgICAgICAgICBjb25zdCBjYXBwZWRDaGFsbGVuZ2VzID0gbmV3Q2hhbGxlbmdlcy5zbGljZSgtNTApO1xuICAgICAgICAgIHJldHVybiB7IHJlY2VudENoYWxsZW5nZXM6IGNhcHBlZENoYWxsZW5nZXMgfTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBzdHJlYWsgc2hvdWxkIGJlIHJlc2V0XG4gICAgICBjaGVja1N0cmVha1Jlc2V0OiAoKSA9PiB7XG4gICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1N0cmVha0NoZWNrXSBDdXJyZW50IHN0YXRlOicsIHsgXG4gICAgICAgICAgICBzdHJlYWs6IHN0YXRlLnN0cmVhaywgXG4gICAgICAgICAgICBsYXN0U3RyZWFrRGF0ZTogc3RhdGUubGFzdFN0cmVha0RhdGUsIFxuICAgICAgICAgICAgc3RyZWFrU3RhdGU6IHN0YXRlLnN0cmVha1N0YXRlIFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gbGFzdCBzdHJlYWsgZGF0ZSwgbm8gbmVlZCB0byBjaGVja1xuICAgICAgICAgIGlmICghc3RhdGUubGFzdFN0cmVha0RhdGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU3RyZWFrQ2hlY2tdIE5vIGxhc3Qgc3RyZWFrIGRhdGUsIHNldHRpbmcgdG8gbm9uZScpO1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHN0cmVha1N0YXRlOiAnbm9uZScgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgdG9kYXkgPSBnZXRUb2RheURhdGVTdHJpbmcoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJZiB0aGV5IGFscmVhZHkgcGxheWVkIHRvZGF5LCBzdHJlYWsgaXMgYWN0aXZlXG4gICAgICAgICAgaWYgKGlzU2FtZURheShzdGF0ZS5sYXN0U3RyZWFrRGF0ZSwgdG9kYXkpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1N0cmVha0NoZWNrXSBQbGF5ZWQgdG9kYXksIGtlZXBpbmcgc3RyZWFrIGFjdGl2ZScpO1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHN0cmVha1N0YXRlOiAnYWN0aXZlJyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJZiB0aGV5IGxhc3QgcGxheWVkIHllc3RlcmRheSwgc3RyZWFrIGlzIHZhbGlkIGJ1dCBpbmFjdGl2ZVxuICAgICAgICAgIGlmIChpc0NvbnNlY3V0aXZlRGF5KHN0YXRlLmxhc3RTdHJlYWtEYXRlLCB0b2RheSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU3RyZWFrQ2hlY2tdIFBsYXllZCB5ZXN0ZXJkYXksIHN0cmVhayBpbmFjdGl2ZSBidXQgdmFsaWQnKTtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBzdHJlYWtTdGF0ZTogJ2luYWN0aXZlJyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJZiBpdCdzIGJlZW4gbW9yZSB0aGFuIGEgZGF5IHNpbmNlIGxhc3QgcGxheSwgcmVzZXQgc3RyZWFrXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tTdHJlYWtDaGVja10gUmVzZXR0aW5nIHN0cmVhayBkdWUgdG8gaW5hY3Rpdml0eScpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgIHN0cmVhazogMCxcbiAgICAgICAgICAgIHN0cmVha1N0YXRlOiAnbm9uZScsXG4gICAgICAgICAgICAvLyBEb24ndCB1cGRhdGUgbGFzdFN0cmVha0RhdGUgc28gdGhleSBjYW4gc3RpbGwgc3RhcnQgYSBuZXcgc3RyZWFrIHRvZGF5XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgXG4gICAgICBjaGVja1N0cmVha1N0YXR1czogKCkgPT4ge1xuICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgY29uc3QgdG9kYXkgPSBnZXRUb2RheURhdGVTdHJpbmcoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJZiBubyBzdHJlYWssIHN0YXR1cyBpcyBcIm5vbmVcIlxuICAgICAgICAgIGlmIChzdGF0ZS5zdHJlYWsgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBzdHJlYWtTdGF0ZTogJ25vbmUnIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIHBsYXllZCB0b2RheSwgc3RyZWFrIGlzIGFjdGl2ZVxuICAgICAgICAgIGlmIChpc1NhbWVEYXkoc3RhdGUubGFzdFN0cmVha0RhdGUsIHRvZGF5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHN0cmVha1N0YXRlOiAnYWN0aXZlJyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBPdGhlcndpc2UsIHN0cmVhayBleGlzdHMgYnV0IGlzIGluYWN0aXZlXG4gICAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHN0cmVha1N0YXRlOiAnaW5hY3RpdmUnIH07XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgLy8gQ29tcGxldGUgYSBnYW1lIGFuZCBoYW5kbGUgc3RyZWFrL1hQIHRyYWNraW5nXG4gICAgICBjb21wbGV0ZUdhbWU6IChnYW1lVHlwZSwgc2NvcmUsIGlzQ29ycmVjdCkgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICBpZiAoIWdhbWVUeXBlKSByZXR1cm4gc3RhdGU7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgW0dhbWVEQl0gQ29tcGxldGluZyBnYW1lOiAke2dhbWVUeXBlfSwgU2NvcmU6ICR7c2NvcmV9LCBDb3JyZWN0OiAke2lzQ29ycmVjdH1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgbGFzdCBwbGF5ZWQgdGltZXN0YW1wXG4gICAgICAgIGNvbnN0IGdhbWVQcm9ncmVzcyA9IHN0YXRlLnByb2dyZXNzW2dhbWVUeXBlXSB8fCB7XG4gICAgICAgICAgc2VjdGlvbnM6IGdlbmVyYXRlU2VjdGlvbnMoKSxcbiAgICAgICAgICB4cDogMCxcbiAgICAgICAgICBxdWVzdHM6IGdlbmVyYXRlRGFpbHlRdWVzdHMoKSxcbiAgICAgICAgICBjdXJyZW50U2VjdGlvbjogMCxcbiAgICAgICAgICBjdXJyZW50TGV2ZWw6IDAsXG4gICAgICAgICAgY29tcGxldGVkTGV2ZWxzOiBbXSxcbiAgICAgICAgICBsYXN0UGxheWVkQXQ6ICcnXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdXBkYXRlZCBnYW1lIHByb2dyZXNzIHdpdGggdGltZXN0YW1wXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRHYW1lUHJvZ3Jlc3MgPSB7XG4gICAgICAgICAgLi4uZ2FtZVByb2dyZXNzLFxuICAgICAgICAgIGxhc3RQbGF5ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgc3RyZWFrIGhhbmRsaW5nIC0gSU1QT1JUQU5UOiBzdHJlYWsgaXMgbm90IHJlc2V0IG9uIHdyb25nIGFuc3dlcnNcbiAgICAgICAgLy8gSXQgb25seSB1cGRhdGVzIChpbmNyZWFzZXMpIHdoZW4gaXQncyB0aGUgZmlyc3QgY29ycmVjdCBhbnN3ZXIgb2YgYSBuZXcgZGF5XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gZ2V0VG9kYXlEYXRlU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHN0cmVha1VwZGF0ZXM6IFBhcnRpYWw8R2FtZVN0YXRlPiA9IHt9O1xuICAgICAgICBcbiAgICAgICAgLy8gT25seSBjb25zaWRlciBzdHJlYWsgdXBkYXRlcyBmb3IgY29ycmVjdCBhbnN3ZXJzXG4gICAgICAgIGlmIChpc0NvcnJlY3QpIHtcbiAgICAgICAgICBpZiAoc3RhdGUubGFzdFN0cmVha0RhdGUgIT09IHRvZGF5KSB7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBjb3JyZWN0IGFuc3dlciBvZiBhIG5ldyBkYXkgLSBpbmNyZWFzZSBzdHJlYWtcbiAgICAgICAgICAgIHN0cmVha1VwZGF0ZXMuc3RyZWFrID0gc3RhdGUuc3RyZWFrICsgMTtcbiAgICAgICAgICAgIHN0cmVha1VwZGF0ZXMubGFzdFN0cmVha0RhdGUgPSB0b2RheTtcbiAgICAgICAgICAgIHN0cmVha1VwZGF0ZXMuc3RyZWFrU3RhdGUgPSAnYWN0aXZlJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coYFtHYW1lREJdIEluY3JlYXNpbmcgc3RyZWFrIHRvICR7c3RyZWFrVXBkYXRlcy5zdHJlYWt9IChmaXJzdCBjb3JyZWN0IGFuc3dlciB0b2RheSlgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQWxyZWFkeSBwbGF5ZWQgdG9kYXkgYW5kIGdvdCBzb21ldGhpbmcgY29ycmVjdCAtIHN0cmVhayByZW1haW5zIGFjdGl2ZVxuICAgICAgICAgICAgc3RyZWFrVXBkYXRlcy5zdHJlYWtTdGF0ZSA9ICdhY3RpdmUnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGFjaGlldmVtZW50cyAtIHRyYWNrIGVhY2ggZ2FtZSB0eXBlIHNlcGFyYXRlbHlcbiAgICAgICAgbGV0IGFjaGlldmVtZW50cyA9IFsuLi4oc3RhdGUuYWNoaWV2ZW1lbnRzIHx8IFtdKV07XG4gICAgICAgIGxldCBnYW1lVHlwZUFjaGlldmVtZW50cyA9IFsuLi4oc3RhdGUuZ2FtZUFjaGlldmVtZW50c1tnYW1lVHlwZV0gfHwgW10pXTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBcIkZpcnN0IFN0ZXBzXCIgYWNoaWV2ZW1lbnQgLSBjb21wbGV0aW5nIGFueSBnYW1lXG4gICAgICAgIGlmICghZ2FtZVR5cGVBY2hpZXZlbWVudHMuaW5jbHVkZXMoJ2ZpcnN0LXN0ZXBzJykpIHtcbiAgICAgICAgICAvLyBBZGQgdG8gZ2FtZS1zcGVjaWZpYyBhY2hpZXZlbWVudHNcbiAgICAgICAgICBnYW1lVHlwZUFjaGlldmVtZW50cy5wdXNoKCdmaXJzdC1zdGVwcycpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFsc28gYWRkIHRvIGdsb2JhbCBhY2hpZXZlbWVudHMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICBpZiAoIWFjaGlldmVtZW50cy5pbmNsdWRlcygnZmlyc3Qtc3RlcHMnKSkge1xuICAgICAgICAgICAgYWNoaWV2ZW1lbnRzLnB1c2goJ2ZpcnN0LXN0ZXBzJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKGBbQWNoaWV2ZW1lbnRdIFVubG9ja2VkOiBGaXJzdCBTdGVwcyBpbiAke2dhbWVUeXBlfSAtIENvbXBsZXRlZCB5b3VyIGZpcnN0IGdhbWUhYCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBcIlBlcmZlY3QgU2NvcmVcIiBhY2hpZXZlbWVudCAtIHNjb3JlIG11c3QgYmUgYXQgbGVhc3QgMTAwIChpbmNsdWRpbmcgYm9udXNlcylcbiAgICAgICAgaWYgKHNjb3JlID49IDEwMCAmJiAhZ2FtZVR5cGVBY2hpZXZlbWVudHMuaW5jbHVkZXMoJ3BlcmZlY3Qtc2NvcmUnKSkge1xuICAgICAgICAgIC8vIEFkZCB0byBnYW1lLXNwZWNpZmljIGFjaGlldmVtZW50c1xuICAgICAgICAgIGdhbWVUeXBlQWNoaWV2ZW1lbnRzLnB1c2goJ3BlcmZlY3Qtc2NvcmUnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBbHNvIGFkZCB0byBnbG9iYWwgYWNoaWV2ZW1lbnRzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgaWYgKCFhY2hpZXZlbWVudHMuaW5jbHVkZXMoJ3BlcmZlY3Qtc2NvcmUnKSkge1xuICAgICAgICAgICAgYWNoaWV2ZW1lbnRzLnB1c2goJ3BlcmZlY3Qtc2NvcmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coYFtBY2hpZXZlbWVudF0gVW5sb2NrZWQ6IFBlcmZlY3QgU2NvcmUgaW4gJHtnYW1lVHlwZX0gLSBTY29yZWQgMTAwJSBvciBoaWdoZXIhYCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBcIlN0cmVhayBNYXN0ZXJcIiBhY2hpZXZlbWVudCAtIG1haW50YWluIGEgNy1kYXkgc3RyZWFrXG4gICAgICAgIC8vIE5vdGU6IFN0cmVhayBNYXN0ZXIgaXMgYSBnbG9iYWwgYWNoaWV2ZW1lbnQsIG5vdCBnYW1lLXNwZWNpZmljXG4gICAgICAgIGlmIChzdHJlYWtVcGRhdGVzLnN0cmVhayAhPT0gdW5kZWZpbmVkICYmIHN0cmVha1VwZGF0ZXMuc3RyZWFrID49IDcgJiYgIWFjaGlldmVtZW50cy5pbmNsdWRlcygnc3RyZWFrLW1hc3RlcicpKSB7XG4gICAgICAgICAgLy8gQWRkIGRpcmVjdGx5IHRvIGdsb2JhbCBhY2hpZXZlbWVudHNcbiAgICAgICAgICBhY2hpZXZlbWVudHMucHVzaCgnc3RyZWFrLW1hc3RlcicpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEJ1dCBhbHNvIGFkZCB0byBnYW1lLXNwZWNpZmljIGFjaGlldmVtZW50cyBmb3IgdGhlIGN1cnJlbnQgZ2FtZSB0eXBlXG4gICAgICAgICAgaWYgKCFnYW1lVHlwZUFjaGlldmVtZW50cy5pbmNsdWRlcygnc3RyZWFrLW1hc3RlcicpKSB7XG4gICAgICAgICAgICBnYW1lVHlwZUFjaGlldmVtZW50cy5wdXNoKCdzdHJlYWstbWFzdGVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbQWNoaWV2ZW1lbnRdIFVubG9ja2VkOiBTdHJlYWsgTWFzdGVyIC0gTWFpbnRhaW5lZCBhIDctZGF5IHN0cmVhayEnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gUHJlcGFyZSB1cGRhdGVkIGdhbWVBY2hpZXZlbWVudHMgb2JqZWN0XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRHYW1lQWNoaWV2ZW1lbnRzID0ge1xuICAgICAgICAgIC4uLnN0YXRlLmdhbWVBY2hpZXZlbWVudHMsXG4gICAgICAgICAgW2dhbWVUeXBlXTogZ2FtZVR5cGVBY2hpZXZlbWVudHNcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBwcm9ncmVzcyB3aXRoIHRoZSBnYW1lIHByb2dyZXNzXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRQcm9ncmVzcyA9IHtcbiAgICAgICAgICAuLi5zdGF0ZS5wcm9ncmVzcyxcbiAgICAgICAgICBbZ2FtZVR5cGVdOiB1cGRhdGVkR2FtZVByb2dyZXNzXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgYSBjaGFsbGVuZ2UgcmVzdWx0IHJlY29yZFxuICAgICAgICBjb25zdCBjaGFsbGVuZ2VSZXN1bHQ6IENoYWxsZW5nZVJlc3VsdCA9IHtcbiAgICAgICAgICBpZDogYCR7Z2FtZVR5cGV9LSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIGNoYWxsZW5nZVR5cGU6IGdhbWVUeXBlIGFzICdtYWtlLXNlbnRlbmNlJyB8ICdtdWx0aXBsZS1jaG9pY2UnIHwgJ2NvbnZlcnNhdGlvbicsXG4gICAgICAgICAgc2NvcmUsXG4gICAgICAgICAgbWF4U2NvcmU6IDEwMCxcbiAgICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIGR1cmF0aW9uOiAwLCAvLyBUT0RPOiBUcmFjayBhY3R1YWwgZHVyYXRpb25cbiAgICAgICAgICBpc0NvcnJlY3QsXG4gICAgICAgICAgZ2FtZVR5cGVcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0byByZWNlbnQgY2hhbGxlbmdlc1xuICAgICAgICBjb25zdCB1cGRhdGVkUmVjZW50Q2hhbGxlbmdlcyA9IFsuLi5zdGF0ZS5yZWNlbnRDaGFsbGVuZ2VzLCBjaGFsbGVuZ2VSZXN1bHRdO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBmaW5hbCBzdGF0ZSB1cGRhdGVzXG4gICAgICAgIGNvbnN0IGdhbWVVcGRhdGVzID0ge1xuICAgICAgICAgIHByb2dyZXNzOiB1cGRhdGVkUHJvZ3Jlc3MsXG4gICAgICAgICAgYWNoaWV2ZW1lbnRzLCAvLyBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgICAgICAgIGdhbWVBY2hpZXZlbWVudHM6IHVwZGF0ZWRHYW1lQWNoaWV2ZW1lbnRzLFxuICAgICAgICAgIHRvdGFsQ2hhbGxlbmdlc0NvbXBsZXRlZDogc3RhdGUudG90YWxDaGFsbGVuZ2VzQ29tcGxldGVkICsgMSxcbiAgICAgICAgICByZWNlbnRDaGFsbGVuZ2VzOiB1cGRhdGVkUmVjZW50Q2hhbGxlbmdlcyxcbiAgICAgICAgICAuLi5zdHJlYWtVcGRhdGVzXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBTYXZlIHRvIGRhdGFiYXNlXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZ2V0KCkuc2F2ZVVzZXJQcm9ncmVzcygpLCAwKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBnYW1lVXBkYXRlcztcbiAgICAgIH0pLFxuICAgICAgXG4gICAgICAvLyBTYXZlIHVzZXIgcHJvZ3Jlc3MgdG8gZGF0YWJhc2Ugd2l0aCBiZXR0ZXIgZXJyb3IgaGFuZGxpbmdcbiAgICAgIHNhdmVVc2VyUHJvZ3Jlc3M6IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF1dGguY3VycmVudFVzZXI7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tEYXRhYmFzZV0gQ2Fubm90IHNhdmU6IE5vIGF1dGhlbnRpY2F0ZWQgdXNlcicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0RhdGFiYXNlXSBTYXZpbmcgdXNlciBwcm9ncmVzcyB0byBGaXJlc3RvcmUuLi4nKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBHZXQgdGhlIHVzZXIgZG9jdW1lbnQgcmVmZXJlbmNlXG4gICAgICAgICAgY29uc3QgdXNlclByb2dyZXNzUmVmID0gZG9jKGRiLCBHQU1FX1BST0dSRVNTX0NPTExFQ1RJT04sIHVzZXIudWlkKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBQcmVwYXJlIGRhdGEgdG8gc2F2ZSAtIGVuc3VyZSBhbGwgZmllbGRzIGV4aXN0XG4gICAgICAgICAgY29uc3QgZGF0YVRvU2F2ZSA9IHtcbiAgICAgICAgICAgIC8vIFVzZXIgcHJvZmlsZVxuICAgICAgICAgICAgcHJvZmlsZTogZ2V0KCkucHJvZmlsZSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gR2FtZSBzdGF0aXN0aWNzXG4gICAgICAgICAgICBzY29yZTogZ2V0KCkuc2NvcmUgfHwgMCxcbiAgICAgICAgICAgIHN0cmVhazogZ2V0KCkuc3RyZWFrIHx8IDAsXG4gICAgICAgICAgICBsYXN0U3RyZWFrRGF0ZTogZ2V0KCkubGFzdFN0cmVha0RhdGUgfHwgJycsXG4gICAgICAgICAgICBzdHJlYWtTdGF0ZTogZ2V0KCkuc3RyZWFrU3RhdGUgfHwgJ25vbmUnLFxuICAgICAgICAgICAgdG90YWxDaGFsbGVuZ2VzQ29tcGxldGVkOiBnZXQoKS50b3RhbENoYWxsZW5nZXNDb21wbGV0ZWQgfHwgMCxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWNoaWV2ZW1lbnRzXG4gICAgICAgICAgICBhY2hpZXZlbWVudHM6IGdldCgpLmFjaGlldmVtZW50cyB8fCBbXSxcbiAgICAgICAgICAgIGdhbWVBY2hpZXZlbWVudHM6IGdldCgpLmdhbWVBY2hpZXZlbWVudHMgfHwge30sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoYWxsZW5nZSBoaXN0b3J5XG4gICAgICAgICAgICByZWNlbnRDaGFsbGVuZ2VzOiBnZXQoKS5yZWNlbnRDaGFsbGVuZ2VzIHx8IFtdLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBHYW1lIHByb2dyZXNzIGRhdGFcbiAgICAgICAgICAgIHByb2dyZXNzOiBnZXQoKS5wcm9ncmVzcyB8fCB7fSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTWV0YWRhdGFcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBMb2cgYSBzdW1tYXJ5IG9mIHdoYXQncyBiZWluZyBzYXZlZFxuICAgICAgICAgIGNvbnNvbGUubG9nKGBbRGF0YWJhc2VdIFNhdmluZyAtIFNjb3JlOiAke2RhdGFUb1NhdmUuc2NvcmV9LCBTdHJlYWs6ICR7ZGF0YVRvU2F2ZS5zdHJlYWt9LCBBY2hpZXZlbWVudHM6ICR7ZGF0YVRvU2F2ZS5hY2hpZXZlbWVudHMubGVuZ3RofWApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIERlZXAgY2xvbmUgdG8gYXZvaWQgRmlyZWJhc2Ugd2FybmluZ3MgYWJvdXQgb2JqZWN0cyB3aXRoIGN1c3RvbSBwcm90b3R5cGVzXG4gICAgICAgICAgY29uc3QgY2xlYW5EYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhVG9TYXZlKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXNlIG1lcmdlIHRvIGF2b2lkIG92ZXJ3cml0aW5nIGFueSBmaWVsZHMgbm90IGluY2x1ZGVkIGluIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICBhd2FpdCBzZXREb2ModXNlclByb2dyZXNzUmVmLCBjbGVhbkRhdGEsIHsgbWVyZ2U6IHRydWUgfSk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tEYXRhYmFzZV0gU3VjY2Vzc2Z1bGx5IHNhdmVkIHVzZXIgcHJvZ3Jlc3MgdG8gRmlyZXN0b3JlJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW0RhdGFiYXNlXSBFcnJvciBzYXZpbmcgdXNlciBwcm9ncmVzczonLCBlcnJvcik7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVHJ5IHRvIHNhdmUgYWdhaW4gYWZ0ZXIgYSBkZWxheVxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXRhYmFzZV0gUmV0cnlpbmcgZmFpbGVkIHNhdmUgb3BlcmF0aW9uLi4uJyk7XG4gICAgICAgICAgICBnZXQoKS5zYXZlVXNlclByb2dyZXNzKCk7XG4gICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcbiAgICAgIC8vIFVzZXItc3BlY2lmaWMgcHJvZ3Jlc3NcbiAgICAgIGxvYWRVc2VyUHJvZ3Jlc3M6IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF1dGguY3VycmVudFVzZXI7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbQXV0aF0gTm8gYXV0aGVudGljYXRlZCB1c2VyIGZvdW5kIHdoZW4gdHJ5aW5nIHRvIGxvYWQgcHJvZ3Jlc3MnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtBdXRoXSBMb2FkaW5nIHByb2dyZXNzIGZvciB1c2VyOiAke3VzZXIudWlkfWApO1xuICAgICAgICAgIGNvbnN0IHVzZXJQcm9ncmVzc1JlZiA9IGRvYyhkYiwgR0FNRV9QUk9HUkVTU19DT0xMRUNUSU9OLCB1c2VyLnVpZCk7XG4gICAgICAgICAgY29uc3QgdXNlclByb2dyZXNzRG9jID0gYXdhaXQgZ2V0RG9jKHVzZXJQcm9ncmVzc1JlZik7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHVzZXJQcm9ncmVzc0RvYy5leGlzdHMoKSkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHVzZXJQcm9ncmVzc0RvYy5kYXRhKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldChzdGF0ZSA9PiAoe1xuICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgcHJvZmlsZTogZGF0YS5wcm9maWxlIHx8IG51bGwsXG4gICAgICAgICAgICAgIHNjb3JlOiBkYXRhLnNjb3JlIHx8IDAsXG4gICAgICAgICAgICAgIHN0cmVhazogZGF0YS5zdHJlYWsgfHwgMCxcbiAgICAgICAgICAgICAgbGFzdFN0cmVha0RhdGU6IGRhdGEubGFzdFN0cmVha0RhdGUgfHwgJycsXG4gICAgICAgICAgICAgIHN0cmVha1N0YXRlOiBkYXRhLnN0cmVha1N0YXRlIHx8ICdub25lJyxcbiAgICAgICAgICAgICAgdG90YWxDaGFsbGVuZ2VzQ29tcGxldGVkOiBkYXRhLnRvdGFsQ2hhbGxlbmdlc0NvbXBsZXRlZCB8fCAwLFxuICAgICAgICAgICAgICBhY2hpZXZlbWVudHM6IGRhdGEuYWNoaWV2ZW1lbnRzIHx8IFtdLFxuICAgICAgICAgICAgICBnYW1lQWNoaWV2ZW1lbnRzOiBkYXRhLmdhbWVBY2hpZXZlbWVudHMgfHwge30sXG4gICAgICAgICAgICAgIHJlY2VudENoYWxsZW5nZXM6IGRhdGEucmVjZW50Q2hhbGxlbmdlcyB8fCBbXSxcbiAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGRhdGEucHJvZ3Jlc3MgfHwge31cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tBdXRoXSBTdWNjZXNzZnVsbHkgbG9hZGVkIHVzZXIgcHJvZ3Jlc3MgZnJvbSBGaXJlc3RvcmUnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tBdXRoXSBObyBzYXZlZCBwcm9ncmVzcyBmb3VuZCBmb3IgdXNlci4gSW5pdGlhbGl6aW5nIG5ldyBwcm9ncmVzcy4nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGluaXRpYWwgZ2FtZSBwcm9ncmVzcyBzdHJ1Y3R1cmVcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgICAgJ21ha2Utc2VudGVuY2UnOiB7XG4gICAgICAgICAgICAgICAgc2VjdGlvbnM6IGdlbmVyYXRlU2VjdGlvbnMoKSxcbiAgICAgICAgICAgICAgICB4cDogMCxcbiAgICAgICAgICAgICAgICBxdWVzdHM6IGdlbmVyYXRlRGFpbHlRdWVzdHMoKSxcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbjogMCxcbiAgICAgICAgICAgICAgICBjdXJyZW50TGV2ZWw6IDAsXG4gICAgICAgICAgICAgICAgY29tcGxldGVkTGV2ZWxzOiBbXVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAnbXVsdGlwbGUtY2hvaWNlJzoge1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zOiBnZW5lcmF0ZVNlY3Rpb25zKCksXG4gICAgICAgICAgICAgICAgeHA6IDAsXG4gICAgICAgICAgICAgICAgcXVlc3RzOiBnZW5lcmF0ZURhaWx5UXVlc3RzKCksXG4gICAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb246IDAsXG4gICAgICAgICAgICAgICAgY3VycmVudExldmVsOiAwLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZExldmVsczogW11cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmlyc3QsIHVubG9jayB0aGUgZmlyc3QgbGV2ZWwgb2YgZWFjaCBnYW1lIHR5cGVcbiAgICAgICAgICAgIGZvciAoY29uc3QgZ2FtZVR5cGUgb2YgT2JqZWN0LmtleXMoaW5pdGlhbFByb2dyZXNzKSkge1xuICAgICAgICAgICAgICBpZiAoaW5pdGlhbFByb2dyZXNzW2dhbWVUeXBlXS5zZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbFByb2dyZXNzW2dhbWVUeXBlXS5zZWN0aW9uc1swXS5pc0xvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsUHJvZ3Jlc3NbZ2FtZVR5cGVdLnNlY3Rpb25zWzBdLmxldmVscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBpbml0aWFsUHJvZ3Jlc3NbZ2FtZVR5cGVdLnNlY3Rpb25zWzBdLmxldmVsc1swXS5pc0xvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhdGUgaW5pdGlhbCB1c2VyIHByb2ZpbGVcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxQcm9maWxlOiBVc2VyUHJvZmlsZSA9IHtcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHVzZXIuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgICBwaG90b1VSTDogdXNlci5waG90b1VSTCxcbiAgICAgICAgICAgICAgam9pbkRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgbGFzdEFjdGl2ZURhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgZ3JhZGVMZXZlbDogbnVsbCxcbiAgICAgICAgICAgICAgcHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBlbWFpbE5vdGlmaWNhdGlvbnM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRhaWx5UmVtaW5kZXI6IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGluaXRpYWwgc3RhdGUgdG8gdXBkYXRlIGxvY2FsbHlcbiAgICAgICAgICAgIGNvbnN0IG5ld1VzZXJEYXRhID0ge1xuICAgICAgICAgICAgICBwcm9maWxlOiBpbml0aWFsUHJvZmlsZSxcbiAgICAgICAgICAgICAgc2NvcmU6IDAsXG4gICAgICAgICAgICAgIHN0cmVhazogMCxcbiAgICAgICAgICAgICAgbGFzdFN0cmVha0RhdGU6ICcnLFxuICAgICAgICAgICAgICBzdHJlYWtTdGF0ZTogJ25vbmUnLFxuICAgICAgICAgICAgICB0b3RhbENoYWxsZW5nZXNDb21wbGV0ZWQ6IDAsXG4gICAgICAgICAgICAgIGFjaGlldmVtZW50czogW10sXG4gICAgICAgICAgICAgIGdhbWVBY2hpZXZlbWVudHM6IHt9LFxuICAgICAgICAgICAgICByZWNlbnRDaGFsbGVuZ2VzOiBbXSxcbiAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGluaXRpYWxQcm9ncmVzcyxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICB1c2VySWQ6IHVzZXIudWlkXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgbG9jYWwgc3RhdGVcbiAgICAgICAgICAgIHNldChzdGF0ZSA9PiAoe1xuICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgLi4ubmV3VXNlckRhdGFcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSU1QT1JUQU5UOiBTYXZlIHRoZSBpbml0aWFsIGRhdGEgdG8gRmlyZXN0b3JlIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgdGhlIHVzZXIgaGFzIGEgZ2FtZVByb2dyZXNzIGRvY3VtZW50IGZyb20gdGhlIHN0YXJ0XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCBzZXREb2ModXNlclByb2dyZXNzUmVmLCBuZXdVc2VyRGF0YSk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQXV0aF0gU3VjY2Vzc2Z1bGx5IGNyZWF0ZWQgbmV3IHVzZXIgcHJvZ3Jlc3MgZG9jdW1lbnQgaW4gRmlyZXN0b3JlJyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gRXJyb3IgY3JlYXRpbmcgaW5pdGlhbCBwcm9ncmVzcyBkb2N1bWVudDonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGlmIHN0cmVhayBzaG91bGQgYmUgcmVzZXQgYWZ0ZXIgbG9hZGluZyBkYXRhXG4gICAgICAgICAgZ2V0KCkuY2hlY2tTdHJlYWtSZXNldCgpO1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBdXRoXSBFcnJvciBsb2FkaW5nIHVzZXIgcHJvZ3Jlc3M6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgXG4gICAgICAvLyBFbnN1cmUgZ2FtZSBwcm9ncmVzcyBleGlzdHMgZm9yIGEgZ2l2ZW4gZ2FtZSB0eXBlXG4gICAgICBlbnN1cmVHYW1lUHJvZ3Jlc3NFeGlzdHM6IChnYW1lVHlwZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBpZiAoIXN0YXRlLnByb2dyZXNzW2dhbWVUeXBlXSkge1xuICAgICAgICAgICAgY29uc3QgbmV3UHJvZ3Jlc3MgPSB7XG4gICAgICAgICAgICAgIHNlY3Rpb25zOiBnZW5lcmF0ZVNlY3Rpb25zKCksXG4gICAgICAgICAgICAgIHhwOiAwLFxuICAgICAgICAgICAgICBxdWVzdHM6IGdlbmVyYXRlRGFpbHlRdWVzdHMoKSxcbiAgICAgICAgICAgICAgY3VycmVudFNlY3Rpb246IDAsXG4gICAgICAgICAgICAgIGN1cnJlbnRMZXZlbDogMCxcbiAgICAgICAgICAgICAgY29tcGxldGVkTGV2ZWxzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHtcbiAgICAgICAgICAgICAgICAuLi5zdGF0ZS5wcm9ncmVzcyxcbiAgICAgICAgICAgICAgICBbZ2FtZVR5cGVdOiBuZXdQcm9ncmVzc1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgLy8gUHJvZmlsZSBtYW5hZ2VtZW50XG4gICAgICB1cGRhdGVVc2VyUHJvZmlsZTogKHVwZGF0ZXM6IFBhcnRpYWw8VXNlclByb2ZpbGU+KSA9PiB7XG4gICAgICAgIHNldCgoc3RhdGUpID0+ICh7XG4gICAgICAgICAgcHJvZmlsZToge1xuICAgICAgICAgICAgLi4uc3RhdGUucHJvZmlsZSxcbiAgICAgICAgICAgIC4uLnVwZGF0ZXNcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgIH0sXG4gICAgfSksXG4gICAge1xuICAgICAgbmFtZTogJ2dhbWUtc3RvcmFnZScsXG4gICAgICAvLyBEb24ndCBwZXJzaXN0IHVzZXIgcHJvZ3Jlc3MgZnJvbSBsb2NhbFN0b3JhZ2UgdG8gYXZvaWQgaHlkcmF0aW9uIGlzc3Vlc1xuICAgICAgcGFydGlhbGl6ZTogKHN0YXRlKSA9PiAoe30pLFxuICAgICAgLy8gT25seSBlbmFibGUgc3RvcmFnZSBvbiB0aGUgY2xpZW50IHNpZGVcbiAgICAgIHNraXBIeWRyYXRpb246IHRydWVcbiAgICB9XG4gIClcbik7Il0sIm5hbWVzIjpbImNyZWF0ZSIsInBlcnNpc3QiLCJkb2MiLCJnZXREb2MiLCJzZXREb2MiLCJkYiIsImF1dGgiLCJnZXRUb2RheURhdGVTdHJpbmciLCJEYXRlIiwidG9JU09TdHJpbmciLCJpc0NvbnNlY3V0aXZlRGF5IiwicHJldmlvdXNEYXRlIiwiY3VycmVudERhdGUiLCJwcmV2IiwiY3VyciIsInNldEhvdXJzIiwidGltZURpZmYiLCJnZXRUaW1lIiwiZGF5c0RpZmYiLCJNYXRoIiwicm91bmQiLCJpc1NhbWVEYXkiLCJkYXRlU3RyMSIsImRhdGVTdHIyIiwiZ2V0VG9tb3Jyb3dEYXRlU3RyaW5nIiwidG9tb3Jyb3ciLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImdlbmVyYXRlU2VjdGlvbnMiLCJjb3VudCIsImxldmVsc1BlclNlY3Rpb24iLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJtYXAiLCJfIiwic2VjdGlvbkluZGV4IiwiaWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiaXNMb2NrZWQiLCJpc0NvbXBsZXRlZCIsImxldmVscyIsImxldmVsSW5kZXgiLCJiZXN0U2NvcmUiLCJhdHRlbXB0cyIsImxhc3RQbGF5ZWQiLCJnZW5lcmF0ZURhaWx5UXVlc3RzIiwiZXhwaXJlc0F0IiwicmV3YXJkIiwicHJvZ3Jlc3MiLCJ0YXJnZXQiLCJHQU1FX1BST0dSRVNTX0NPTExFQ1RJT04iLCJ1c2VHYW1lU3RvcmUiLCJzZXQiLCJnZXQiLCJwcm9maWxlIiwic2NvcmUiLCJzdHJlYWsiLCJsYXN0U3RyZWFrRGF0ZSIsInN0cmVha1N0YXRlIiwidG90YWxDaGFsbGVuZ2VzQ29tcGxldGVkIiwiYWNoaWV2ZW1lbnRzIiwiZ2FtZUFjaGlldmVtZW50cyIsInJlY2VudENoYWxsZW5nZXMiLCJhZGRQb2ludHMiLCJwb2ludHMiLCJnYW1lVHlwZSIsInN0YXRlIiwiZ2FtZVByb2dyZXNzIiwiY29uc29sZSIsImxvZyIsInhwIiwibmV3WFAiLCJtYXgiLCJ1cGRhdGVkR2FtZVByb2dyZXNzIiwidXBkYXRlZFF1ZXN0cyIsInF1ZXN0cyIsIm5ld1N0YXRlIiwic2V0VGltZW91dCIsInNhdmVVc2VyUHJvZ3Jlc3MiLCJpbmNyZWFzZVN0cmVhayIsInRvZGF5IiwibmV3U3RyZWFrIiwicmVzZXRTdHJlYWsiLCJpbml0aWFsaXplR2FtZVByb2dyZXNzIiwic2VjdGlvbnMiLCJjdXJyZW50U2VjdGlvbiIsImN1cnJlbnRMZXZlbCIsImNvbXBsZXRlZExldmVscyIsImNvbXBsZXRlTGV2ZWwiLCJzZWN0aW9uSWQiLCJsZXZlbElkIiwidXBkYXRlZFNlY3Rpb25zIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5Iiwic2VjdGlvbiIsImxldmVsIiwidW5kZWZpbmVkIiwibGV2ZWxLZXkiLCJnYW1lVHlwZUFjaGlldmVtZW50cyIsIm5leHRTZWN0aW9uSWQiLCJuZXh0TGV2ZWxJZCIsImlzTGV2ZWxDb21wbGV0ZWQiLCJpbmNsdWRlcyIsInB1c2giLCJpc1NlY3Rpb25Db21wbGV0ZWQiLCJldmVyeSIsImx2bCIsInF1ZXN0IiwibmV3UHJvZ3Jlc3MiLCJtaW4iLCJ1cGRhdGVkR2FtZUFjaGlldmVtZW50cyIsImNhbkFjY2Vzc0xldmVsIiwiaXNBcnJheSIsInVubG9ja1NlY3Rpb24iLCJhZGRQcm9ncmVzc1RvUXVlc3QiLCJxdWVzdElkIiwiYW1vdW50IiwiY29tcGxldGVRdWVzdCIsInVwZGF0ZWRQcm9ncmVzcyIsImNoZWNrQW5kUmVmcmVzaFF1ZXN0cyIsInF1ZXN0c05lZWRSZXNldCIsImZvckVhY2giLCJyZXNldFF1ZXN0cyIsImZyZXNoUXVlc3RzIiwiY29tcGxldGVTdHJlYWtCb251c1F1ZXN0IiwiYWRkQ2hhbGxlbmdlUmVzdWx0IiwicmVzdWx0IiwibmV3Q2hhbGxlbmdlcyIsImNhcHBlZENoYWxsZW5nZXMiLCJzbGljZSIsImNoZWNrU3RyZWFrUmVzZXQiLCJjaGVja1N0cmVha1N0YXR1cyIsImNvbXBsZXRlR2FtZSIsImlzQ29ycmVjdCIsImxhc3RQbGF5ZWRBdCIsInN0cmVha1VwZGF0ZXMiLCJjaGFsbGVuZ2VSZXN1bHQiLCJub3ciLCJjaGFsbGVuZ2VUeXBlIiwibWF4U2NvcmUiLCJjb21wbGV0ZWRBdCIsImR1cmF0aW9uIiwidXBkYXRlZFJlY2VudENoYWxsZW5nZXMiLCJnYW1lVXBkYXRlcyIsInVzZXIiLCJjdXJyZW50VXNlciIsImVycm9yIiwidXNlclByb2dyZXNzUmVmIiwidWlkIiwiZGF0YVRvU2F2ZSIsInVwZGF0ZWRBdCIsImNsZWFuRGF0YSIsIm1lcmdlIiwibG9hZFVzZXJQcm9ncmVzcyIsInVzZXJQcm9ncmVzc0RvYyIsImV4aXN0cyIsImRhdGEiLCJpbml0aWFsUHJvZ3Jlc3MiLCJPYmplY3QiLCJrZXlzIiwiaW5pdGlhbFByb2ZpbGUiLCJkaXNwbGF5TmFtZSIsImVtYWlsIiwicGhvdG9VUkwiLCJqb2luRGF0ZSIsImxhc3RBY3RpdmVEYXRlIiwiZ3JhZGVMZXZlbCIsInByZWZlcmVuY2VzIiwiZW1haWxOb3RpZmljYXRpb25zIiwiZGFpbHlSZW1pbmRlciIsIm5ld1VzZXJEYXRhIiwiY3JlYXRlZEF0IiwidXNlcklkIiwiZW5zdXJlR2FtZVByb2dyZXNzRXhpc3RzIiwidXBkYXRlVXNlclByb2ZpbGUiLCJ1cGRhdGVzIiwibmFtZSIsInBhcnRpYWxpemUiLCJza2lwSHlkcmF0aW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/store/gameStore.ts\n"));

/***/ })

});